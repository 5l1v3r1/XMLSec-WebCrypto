var xpath="undefined"==typeof exports?{}:exports;!function(e){"use strict";function t(){this.init()}function r(e){this.expression=e}function n(){}function o(e){arguments.length>0&&this.init(e)}function i(e){arguments.length>0&&this.init(e)}function s(e,t){arguments.length>0&&this.init(e,t)}function a(e,t){arguments.length>0&&this.init(e,t)}function u(e,t){arguments.length>0&&this.init(e,t)}function c(e,t){arguments.length>0&&this.init(e,t)}function l(e,t){arguments.length>0&&this.init(e,t)}function p(e,t){arguments.length>0&&this.init(e,t)}function h(e,t){arguments.length>0&&this.init(e,t)}function f(e,t){arguments.length>0&&this.init(e,t)}function m(e,t){arguments.length>0&&this.init(e,t)}function d(e,t){arguments.length>0&&this.init(e,t)}function g(e,t){arguments.length>0&&this.init(e,t)}function y(e,t){arguments.length>0&&this.init(e,t)}function E(e,t){arguments.length>0&&this.init(e,t)}function v(e,t){arguments.length>0&&this.init(e,t)}function A(e,t){arguments.length>0&&this.init(e,t)}function w(e,t,r){arguments.length>0&&this.init(e,t,r)}function N(e){for(;e&&e.parentNode;)e=e.parentNode;return e}function S(e,t){arguments.length>0&&this.init(e,t)}function b(e,t,r){arguments.length>0&&this.init(e,t,r)}function T(e,t){arguments.length>0&&this.init(e,t)}function x(e){arguments.length>0&&this.init(e)}function R(e,t){arguments.length>0&&this.init(e,t)}function I(e){arguments.length>0&&this.init(e)}function C(e){arguments.length>0&&this.init(e)}function L(e){arguments.length>0&&this.init(e)}function M(e){this.init(e)}function D(e,t){if(e===t)return 0;if(e.compareDocumentPosition){var r=e.compareDocumentPosition(t);return 1&r?1:10&r?1:20&r?-1:0}for(var n=0,o=0,i=e;null!=i;i=i.parentNode||i.ownerElement)n++;for(var s=t;null!=s;s=s.parentNode||s.ownerElement)o++;if(n>o){for(;n>o;)e=e.parentNode||e.ownerElement,n--;if(e===t)return 1}else if(o>n){for(;o>n;)t=t.parentNode||t.ownerElement,o--;if(e===t)return-1}for(var a=e.parentNode||e.ownerElement,u=t.parentNode||t.ownerElement;a!==u;)e=a,t=u,a=e.parentNode||e.ownerElement,u=t.parentNode||t.ownerElement;var c=G.isAttribute(e),l=G.isAttribute(t);if(c&&!l)return-1;if(!c&&l)return 1;if(a)for(var p=c?a.attributes:a.childNodes,h=p.length,f=0;f<h;f+=1){var m=p[f];if(m===e)return-1;if(m===t)return 1}throw new Error("Unexpected: could not determine node order")}function O(){this.init()}function U(e,t,r){this.isXPathNamespace=!0,this.ownerDocument=r.ownerDocument,this.nodeName="#namespace",this.prefix=e,this.localName=e,this.namespaceURI=t,this.nodeValue=t,this.ownerElement=r,this.nodeType=U.XPATH_NAMESPACE_NODE}function _(e,t,r){this.variableResolver=null!=e?e:new P,this.namespaceResolver=null!=t?t:new B,this.functionResolver=null!=r?r:new V}function P(){}function V(e){this.thisArg=null!=e?e:q,this.functions=new Object,this.addStandardFunctions()}function B(){}function H(e,t,r){this.xpath=r.parse(e),this.context=new _,this.context.namespaceResolver=new F(t)}function F(e){this.xpathNSResolver=e}function W(e){this.node=e,this.namespaceResolver=new B}function X(e,t){switch(t==X.ANY_TYPE&&(e.constructor===I?t=X.STRING_TYPE:e.constructor===C?t=X.NUMBER_TYPE:e.constructor===L?t=X.BOOLEAN_TYPE:e.constructor===O&&(t=X.UNORDERED_NODE_ITERATOR_TYPE)),this.resultType=t,t){case X.NUMBER_TYPE:return void(this.numberValue=e.numberValue());case X.STRING_TYPE:return void(this.stringValue=e.stringValue());case X.BOOLEAN_TYPE:return void(this.booleanValue=e.booleanValue());case X.ANY_UNORDERED_NODE_TYPE:case X.FIRST_ORDERED_NODE_TYPE:if(e.constructor===O)return void(this.singleNodeValue=e.first());break;case X.UNORDERED_NODE_ITERATOR_TYPE:case X.ORDERED_NODE_ITERATOR_TYPE:if(e.constructor===O)return this.invalidIteratorState=!1,this.nodes=e.toArray(),void(this.iteratorIndex=0);break;case X.UNORDERED_NODE_SNAPSHOT_TYPE:case X.ORDERED_NODE_SNAPSHOT_TYPE:if(e.constructor===O)return this.nodes=e.toArray(),void(this.snapshotLength=this.nodes.length)}throw new Y(Y.TYPE_ERR)}function K(e,t){e.createExpression=function(e,r){try{return new H(e,r,t)}catch(e){throw new Y(Y.INVALID_EXPRESSION_ERR,e)}},e.createNSResolver=function(e){return new W(e)},e.evaluate=function(r,n,o,i,s){if(i<0||i>9)throw{code:0,toString:function(){return"Request type not supported"}};return e.createExpression(r,o,t).evaluate(n,i,s)}}t.prototype=new Object,t.prototype.constructor=t,t.superclass=Object.prototype,t.prototype.init=function(){this.reduceActions=[],this.reduceActions[3]=function(e){return new a(e[0],e[2])},this.reduceActions[5]=function(e){return new u(e[0],e[2])},this.reduceActions[7]=function(e){return new c(e[0],e[2])},this.reduceActions[8]=function(e){return new l(e[0],e[2])},this.reduceActions[10]=function(e){return new p(e[0],e[2])},this.reduceActions[11]=function(e){return new h(e[0],e[2])},this.reduceActions[12]=function(e){return new f(e[0],e[2])},this.reduceActions[13]=function(e){return new m(e[0],e[2])},this.reduceActions[15]=function(e){return new d(e[0],e[2])},this.reduceActions[16]=function(e){return new g(e[0],e[2])},this.reduceActions[18]=function(e){return new y(e[0],e[2])},this.reduceActions[19]=function(e){return new E(e[0],e[2])},this.reduceActions[20]=function(e){return new v(e[0],e[2])},this.reduceActions[22]=function(e){return new i(e[1])},this.reduceActions[24]=function(e){return new A(e[0],e[2])},this.reduceActions[25]=function(e){return new w(void 0,void 0,e[0])},this.reduceActions[27]=function(e){return e[0].locationPath=e[2],e[0]},this.reduceActions[28]=function(e){return e[0].locationPath=e[2],e[0].locationPath.steps.unshift(new b(b.DESCENDANTORSELF,new T(T.NODE,void 0),[])),e[0]},this.reduceActions[29]=function(e){return new w(e[0],[],void 0)},this.reduceActions[30]=function(e){return G.instance_of(e[0],w)?(void 0==e[0].filterPredicates&&(e[0].filterPredicates=[]),e[0].filterPredicates.push(e[1]),e[0]):new w(e[0],[e[1]],void 0)},this.reduceActions[32]=function(e){return e[1]},this.reduceActions[33]=function(e){return new I(e[0])},this.reduceActions[34]=function(e){return new C(e[0])},this.reduceActions[36]=function(e){return new R(e[0],[])},this.reduceActions[37]=function(e){return new R(e[0],e[2])},this.reduceActions[38]=function(e){return[e[0]]},this.reduceActions[39]=function(e){return e[2].unshift(e[0]),e[2]},this.reduceActions[43]=function(e){return new S(!0,[])},this.reduceActions[44]=function(e){return e[1].absolute=!0,e[1]},this.reduceActions[46]=function(e){return new S(!1,[e[0]])},this.reduceActions[47]=function(e){return e[0].steps.push(e[2]),e[0]},this.reduceActions[49]=function(e){return new b(e[0],e[1],[])},this.reduceActions[50]=function(e){return new b(b.CHILD,e[0],[])},this.reduceActions[51]=function(e){return new b(e[0],e[1],e[2])},this.reduceActions[52]=function(e){return new b(b.CHILD,e[0],e[1])},this.reduceActions[54]=function(e){return[e[0]]},this.reduceActions[55]=function(e){return e[1].unshift(e[0]),e[1]},this.reduceActions[56]=function(e){return"ancestor"==e[0]?b.ANCESTOR:"ancestor-or-self"==e[0]?b.ANCESTORORSELF:"attribute"==e[0]?b.ATTRIBUTE:"child"==e[0]?b.CHILD:"descendant"==e[0]?b.DESCENDANT:"descendant-or-self"==e[0]?b.DESCENDANTORSELF:"following"==e[0]?b.FOLLOWING:"following-sibling"==e[0]?b.FOLLOWINGSIBLING:"namespace"==e[0]?b.NAMESPACE:"parent"==e[0]?b.PARENT:"preceding"==e[0]?b.PRECEDING:"preceding-sibling"==e[0]?b.PRECEDINGSIBLING:"self"==e[0]?b.SELF:-1},this.reduceActions[57]=function(e){return b.ATTRIBUTE},this.reduceActions[59]=function(e){return"comment"==e[0]?new T(T.COMMENT,void 0):"text"==e[0]?new T(T.TEXT,void 0):"processing-instruction"==e[0]?new T(T.PI,void 0):"node"==e[0]?new T(T.NODE,void 0):new T(-1,void 0)},this.reduceActions[60]=function(e){return new T(T.PI,e[2])},this.reduceActions[61]=function(e){return e[1]},this.reduceActions[63]=function(e){return e[1].absolute=!0,e[1].steps.unshift(new b(b.DESCENDANTORSELF,new T(T.NODE,void 0),[])),e[1]},this.reduceActions[64]=function(e){return e[0].steps.push(new b(b.DESCENDANTORSELF,new T(T.NODE,void 0),[])),e[0].steps.push(e[2]),e[0]},this.reduceActions[65]=function(e){return new b(b.SELF,new T(T.NODE,void 0),[])},this.reduceActions[66]=function(e){return new b(b.PARENT,new T(T.NODE,void 0),[])},this.reduceActions[67]=function(e){return new x(e[1])},this.reduceActions[68]=function(e){return new T(T.NAMETESTANY,void 0)},this.reduceActions[69]=function(e){var t=e[0].substring(0,e[0].indexOf(":"));return new T(T.NAMETESTPREFIXANY,t)},this.reduceActions[70]=function(e){return new T(T.NAMETESTQNAME,e[0])}},t.actionTable=[" s s        sssssssss    s ss  s  ss","                 s                  ","r  rrrrrrrrr         rrrrrrr rr  r  ","                rrrrr               "," s s        sssssssss    s ss  s  ss","rs  rrrrrrrr s  sssssrrrrrr  rrs rs "," s s        sssssssss    s ss  s  ss","                            s       ","                            s       ","r  rrrrrrrrr         rrrrrrr rr rr  ","r  rrrrrrrrr         rrrrrrr rr rr  ","r  rrrrrrrrr         rrrrrrr rr rr  ","r  rrrrrrrrr         rrrrrrr rr rr  ","r  rrrrrrrrr         rrrrrrr rr rr  ","  s                                 ","                            s       "," s           s  sssss          s  s ","r  rrrrrrrrr         rrrrrrr rr  r  ","a                                   ","r       s                    rr  r  ","r      sr                    rr  r  ","r   s  rr            s       rr  r  ","r   rssrr            rss     rr  r  ","r   rrrrr            rrrss   rr  r  ","r   rrrrrsss         rrrrr   rr  r  ","r   rrrrrrrr         rrrrr   rr  r  ","r   rrrrrrrr         rrrrrs  rr  r  ","r   rrrrrrrr         rrrrrr  rr  r  ","r   rrrrrrrr         rrrrrr  rr  r  ","r  srrrrrrrr         rrrrrrs rr sr  ","r  srrrrrrrr         rrrrrrs rr  r  ","r  rrrrrrrrr         rrrrrrr rr rr  ","r  rrrrrrrrr         rrrrrrr rr rr  ","r  rrrrrrrrr         rrrrrrr rr rr  ","r   rrrrrrrr         rrrrrr  rr  r  ","r   rrrrrrrr         rrrrrr  rr  r  ","r  rrrrrrrrr         rrrrrrr rr  r  ","r  rrrrrrrrr         rrrrrrr rr  r  ","                sssss               ","r  rrrrrrrrr         rrrrrrr rr sr  ","r  rrrrrrrrr         rrrrrrr rr  r  ","r  rrrrrrrrr         rrrrrrr rr rr  ","r  rrrrrrrrr         rrrrrrr rr rr  ","                             s      ","r  srrrrrrrr         rrrrrrs rr  r  ","r   rrrrrrrr         rrrrr   rr  r  ","              s                     ","                             s      ","                rrrrr               "," s s        sssssssss    s sss s  ss","r  srrrrrrrr         rrrrrrs rr  r  "," s s        sssssssss    s ss  s  ss"," s s        sssssssss    s ss  s  ss"," s s        sssssssss    s ss  s  ss"," s s        sssssssss    s ss  s  ss"," s s        sssssssss    s ss  s  ss"," s s        sssssssss    s ss  s  ss"," s s        sssssssss    s ss  s  ss"," s s        sssssssss    s ss  s  ss"," s s        sssssssss    s ss  s  ss"," s s        sssssssss    s ss  s  ss"," s s        sssssssss    s ss  s  ss"," s s        sssssssss    s ss  s  ss"," s s        sssssssss    s ss  s  ss"," s s        sssssssss      ss  s  ss"," s s        sssssssss    s ss  s  ss"," s           s  sssss          s  s "," s           s  sssss          s  s ","r  rrrrrrrrr         rrrrrrr rr rr  "," s           s  sssss          s  s "," s           s  sssss          s  s ","r  rrrrrrrrr         rrrrrrr rr sr  ","r  rrrrrrrrr         rrrrrrr rr sr  ","r  rrrrrrrrr         rrrrrrr rr  r  ","r  rrrrrrrrr         rrrrrrr rr rr  ","                             s      ","r  rrrrrrrrr         rrrrrrr rr rr  ","r  rrrrrrrrr         rrrrrrr rr rr  ","                             rr     ","                             s      ","                             rs     ","r      sr                    rr  r  ","r   s  rr            s       rr  r  ","r   rssrr            rss     rr  r  ","r   rssrr            rss     rr  r  ","r   rrrrr            rrrss   rr  r  ","r   rrrrr            rrrss   rr  r  ","r   rrrrr            rrrss   rr  r  ","r   rrrrr            rrrss   rr  r  ","r   rrrrrsss         rrrrr   rr  r  ","r   rrrrrsss         rrrrr   rr  r  ","r   rrrrrrrr         rrrrr   rr  r  ","r   rrrrrrrr         rrrrr   rr  r  ","r   rrrrrrrr         rrrrr   rr  r  ","r   rrrrrrrr         rrrrrr  rr  r  ","                                 r  ","                                 s  ","r  srrrrrrrr         rrrrrrs rr  r  ","r  srrrrrrrr         rrrrrrs rr  r  ","r  rrrrrrrrr         rrrrrrr rr  r  ","r  rrrrrrrrr         rrrrrrr rr  r  ","r  rrrrrrrrr         rrrrrrr rr  r  ","r  rrrrrrrrr         rrrrrrr rr  r  ","r  rrrrrrrrr         rrrrrrr rr rr  ","r  rrrrrrrrr         rrrrrrr rr rr  "," s s        sssssssss    s ss  s  ss","r  rrrrrrrrr         rrrrrrr rr rr  ","                             r      "],t.actionTableNumber=[" 1 0        /.-,+*)('    & %$  #  \"!","                 J                  ","a  aaaaaaaaa         aaaaaaa aa  a  ","                YYYYY               "," 1 0        /.-,+*)('    & %$  #  \"!","K1  KKKKKKKK .  +*)('KKKKKK  KK# K\" "," 1 0        /.-,+*)('    & %$  #  \"!","                            N       ","                            O       ","e  eeeeeeeee         eeeeeee ee ee  ","f  fffffffff         fffffff ff ff  ","d  ddddddddd         ddddddd dd dd  ","B  BBBBBBBBB         BBBBBBB BB BB  ","A  AAAAAAAAA         AAAAAAA AA AA  ","  P                                 ","                            Q       "," 1           .  +*)('          #  \" ","b  bbbbbbbbb         bbbbbbb bb  b  ","                                    ","!       S                    !!  !  ",'"      T"                    ""  "  ',"$   V  $$            U       $$  $  ","&   &ZY&&            &XW     &&  &  ",")   )))))            )))\\[   ))  )  ",".   ....._^]         .....   ..  .  ","1   11111111         11111   11  1  ","5   55555555         55555`  55  5  ","7   77777777         777777  77  7  ","9   99999999         999999  99  9  ",":  c::::::::         ::::::b :: a:  ","I  fIIIIIIII         IIIIIIe II  I  ","=  =========         ======= == ==  ","?  ?????????         ??????? ?? ??  ","C  CCCCCCCCC         CCCCCCC CC CC  ","J   JJJJJJJJ         JJJJJJ  JJ  J  ","M   MMMMMMMM         MMMMMM  MM  M  ","N  NNNNNNNNN         NNNNNNN NN  N  ","P  PPPPPPPPP         PPPPPPP PP  P  ","                +*)('               ","R  RRRRRRRRR         RRRRRRR RR aR  ","U  UUUUUUUUU         UUUUUUU UU  U  ","Z  ZZZZZZZZZ         ZZZZZZZ ZZ ZZ  ","c  ccccccccc         ccccccc cc cc  ","                             j      ","L  fLLLLLLLL         LLLLLLe LL  L  ","6   66666666         66666   66  6  ","              k                     ","                             l      ","                XXXXX               "," 1 0        /.-,+*)('    & %$m #  \"!","_  f________         ______e __  _  "," 1 0        /.-,+*)('    & %$  #  \"!"," 1 0        /.-,+*)('    & %$  #  \"!"," 1 0        /.-,+*)('    & %$  #  \"!"," 1 0        /.-,+*)('    & %$  #  \"!"," 1 0        /.-,+*)('    & %$  #  \"!"," 1 0        /.-,+*)('    & %$  #  \"!"," 1 0        /.-,+*)('    & %$  #  \"!"," 1 0        /.-,+*)('    & %$  #  \"!"," 1 0        /.-,+*)('    & %$  #  \"!"," 1 0        /.-,+*)('    & %$  #  \"!"," 1 0        /.-,+*)('    & %$  #  \"!"," 1 0        /.-,+*)('    & %$  #  \"!"," 1 0        /.-,+*)('    & %$  #  \"!"," 1 0        /.-,+*)('      %$  #  \"!"," 1 0        /.-,+*)('    & %$  #  \"!"," 1           .  +*)('          #  \" "," 1           .  +*)('          #  \" ",">  >>>>>>>>>         >>>>>>> >> >>  "," 1           .  +*)('          #  \" "," 1           .  +*)('          #  \" ","Q  QQQQQQQQQ         QQQQQQQ QQ aQ  ","V  VVVVVVVVV         VVVVVVV VV aV  ","T  TTTTTTTTT         TTTTTTT TT  T  ","@  @@@@@@@@@         @@@@@@@ @@ @@  ","                                   ","[  [[[[[[[[[         [[[[[[[ [[ [[  ","D  DDDDDDDDD         DDDDDDD DD DD  ","                             HH     ","                                   ","                             F     ","#      T#                    ##  #  ","%   V  %%            U       %%  %  ","'   'ZY''            'XW     ''  '  ","(   (ZY((            (XW     ((  (  ","+   +++++            +++\\[   ++  +  ","*   *****            ***\\[   **  *  ","-   -----            ---\\[   --  -  ",",   ,,,,,            ,,,\\[   ,,  ,  ","0   00000_^]         00000   00  0  ","/   /////_^]         /////   //  /  ","2   22222222         22222   22  2  ","3   33333333         33333   33  3  ","4   44444444         44444   44  4  ","8   88888888         888888  88  8  ","                                 ^  ","                                   ",";  f;;;;;;;;         ;;;;;;e ;;  ;  ","<  f<<<<<<<<         <<<<<<e <<  <  ","O  OOOOOOOOO         OOOOOOO OO  O  ","`  `````````         ``````` ``  `  ","S  SSSSSSSSS         SSSSSSS SS  S  ","W  WWWWWWWWW         WWWWWWW WW  W  ","\\  \\\\\\\\\\\\\\\\\\         \\\\\\\\\\\\\\ \\\\ \\\\  ","E  EEEEEEEEE         EEEEEEE EE EE  "," 1 0        /.-,+*)('    & %$  #  \"!","]  ]]]]]]]]]         ]]]]]]] ]] ]]  ","                             G      "],t.gotoTable=["3456789:;<=>?@ AB  CDEFGH IJ ","                             ","                             ","                             ","L456789:;<=>?@ AB  CDEFGH IJ ","            M        EFGH IJ ","       N;<=>?@ AB  CDEFGH IJ ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","            S        EFGH IJ ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","              e              ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                        h  J ","              i          j   ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","o456789:;<=>?@ ABpqCDEFGH IJ ","                             ","  r6789:;<=>?@ AB  CDEFGH IJ ","   s789:;<=>?@ AB  CDEFGH IJ ","    t89:;<=>?@ AB  CDEFGH IJ ","    u89:;<=>?@ AB  CDEFGH IJ ","     v9:;<=>?@ AB  CDEFGH IJ ","     w9:;<=>?@ AB  CDEFGH IJ ","     x9:;<=>?@ AB  CDEFGH IJ ","     y9:;<=>?@ AB  CDEFGH IJ ","      z:;<=>?@ AB  CDEFGH IJ ","      {:;<=>?@ AB  CDEFGH IJ ","       |;<=>?@ AB  CDEFGH IJ ","       };<=>?@ AB  CDEFGH IJ ","       ~;<=>?@ AB  CDEFGH IJ ","         =>?@ AB  CDEFGH IJ ","456789:;<=>?@ AB  CDEFGH IJ","                    EFGH IJ ","                    EFGH IJ ","                             ","                      GH IJ ","                      GH IJ ","              i             ","              i             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","o456789:;<=>?@ ABqCDEFGH IJ ","                             ","                             "],t.productions=[[1,1,2],[2,1,3],[3,1,4],[3,3,3,-9,4],[4,1,5],[4,3,4,-8,5],[5,1,6],[5,3,5,-22,6],[5,3,5,-5,6],[6,1,7],[6,3,6,-23,7],[6,3,6,-24,7],[6,3,6,-6,7],[6,3,6,-7,7],[7,1,8],[7,3,7,-25,8],[7,3,7,-26,8],[8,1,9],[8,3,8,-12,9],[8,3,8,-11,9],[8,3,8,-10,9],[9,1,10],[9,2,-26,9],[10,1,11],[10,3,10,-27,11],[11,1,12],[11,1,13],[11,3,13,-28,14],[11,3,13,-4,14],[13,1,15],[13,2,13,16],[15,1,17],[15,3,-29,2,-30],[15,1,-15],[15,1,-16],[15,1,18],[18,3,-13,-29,-30],[18,4,-13,-29,19,-30],[19,1,20],[19,3,20,-31,19],[20,1,2],[12,1,14],[12,1,21],[21,1,-28],[21,2,-28,14],[21,1,22],[14,1,23],[14,3,14,-28,23],[14,1,24],[23,2,25,26],[23,1,26],[23,3,25,26,27],[23,2,26,27],[23,1,28],[27,1,16],[27,2,16,27],[25,2,-14,-3],[25,1,-32],[26,1,29],[26,3,-20,-29,-30],[26,4,-21,-29,-15,-30],[16,3,-33,30,-34],[30,1,2],[22,2,-4,14],[24,3,14,-4,23],[28,1,-35],[28,1,-2],[17,2,-36,-18],[29,1,-17],[29,1,-19],[29,1,-18]],t.DOUBLEDOT=2,t.DOUBLECOLON=3,t.DOUBLESLASH=4,t.NOTEQUAL=5,t.LESSTHANOREQUAL=6,t.GREATERTHANOREQUAL=7,t.AND=8,t.OR=9,t.MOD=10,t.DIV=11,t.MULTIPLYOPERATOR=12,t.FUNCTIONNAME=13,t.AXISNAME=14,t.LITERAL=15,t.NUMBER=16,t.ASTERISKNAMETEST=17,t.QNAME=18,t.NCNAMECOLONASTERISK=19,t.NODETYPE=20,t.PROCESSINGINSTRUCTIONWITHLITERAL=21,t.EQUALS=22,t.LESSTHAN=23,t.GREATERTHAN=24,t.PLUS=25,t.MINUS=26,t.BAR=27,t.SLASH=28,t.LEFTPARENTHESIS=29,t.RIGHTPARENTHESIS=30,t.COMMA=31,t.AT=32,t.LEFTBRACKET=33,t.RIGHTBRACKET=34,t.DOT=35,t.DOLLAR=36,t.prototype.tokenize=function(e){for(var r=[],n=[],o=e+"\0",i=0,s=o.charAt(i++);;){for(;" "==s||"\t"==s||"\r"==s||"\n"==s;)s=o.charAt(i++);if("\0"==s||i>=o.length)break;if("("!=s)if(")"!=s)if("["!=s)if("]"!=s)if("@"!=s)if(","!=s)if("|"!=s)if("+"!=s)if("-"!=s)if("="!=s)if("$"!=s)if("."!=s)if("'"!=s&&'"'!=s)if(s>="0"&&s<="9"){var a=s;for(s=o.charAt(i++);s>="0"&&s<="9";)a+=s,s=o.charAt(i++);if("."==s&&o.charAt(i)>="0"&&o.charAt(i)<="9")for(a+=s,a+=o.charAt(i++),s=o.charAt(i++);s>="0"&&s<="9";)a+=s,s=o.charAt(i++);r.push(t.NUMBER),n.push(a)}else if("*"!=s)if(":"!=s||":"!=o.charAt(i))if("/"!=s)if("!"!=s||"="!=o.charAt(i))if("<"!=s)if(">"!=s){if("_"!=s&&!G.isLetter(s.charCodeAt(0)))throw new Error("Unexpected character "+s);var u=s;for(s=o.charAt(i++);G.isNCNameChar(s.charCodeAt(0));)u+=s,s=o.charAt(i++);if(r.length>0){var c=r[r.length-1];if(c!=t.AT&&c!=t.DOUBLECOLON&&c!=t.LEFTPARENTHESIS&&c!=t.LEFTBRACKET&&c!=t.AND&&c!=t.OR&&c!=t.MOD&&c!=t.DIV&&c!=t.MULTIPLYOPERATOR&&c!=t.SLASH&&c!=t.DOUBLESLASH&&c!=t.BAR&&c!=t.PLUS&&c!=t.MINUS&&c!=t.EQUALS&&c!=t.NOTEQUAL&&c!=t.LESSTHAN&&c!=t.LESSTHANOREQUAL&&c!=t.GREATERTHAN&&c!=t.GREATERTHANOREQUAL){if("and"==u){r.push(t.AND),n.push(u);continue}if("or"==u){r.push(t.OR),n.push(u);continue}if("mod"==u){r.push(t.MOD),n.push(u);continue}if("div"==u){r.push(t.DIV),n.push(u);continue}}}if(":"==s){if("*"==o.charAt(i)){r.push(t.NCNAMECOLONASTERISK),n.push(u+":*"),i++,s=o.charAt(i++);continue}if("_"==o.charAt(i)||G.isLetter(o.charCodeAt(i))){for(u+=":",s=o.charAt(i++);G.isNCNameChar(s.charCodeAt(0));)u+=s,s=o.charAt(i++);if("("==s){r.push(t.FUNCTIONNAME),n.push(u);continue}r.push(t.QNAME),n.push(u);continue}if(":"==o.charAt(i)){r.push(t.AXISNAME),n.push(u);continue}}if("("==s){if("comment"==u||"text"==u||"node"==u){r.push(t.NODETYPE),n.push(u);continue}if("processing-instruction"==u){")"==o.charAt(i)?r.push(t.NODETYPE):r.push(t.PROCESSINGINSTRUCTIONWITHLITERAL),n.push(u);continue}r.push(t.FUNCTIONNAME),n.push(u);continue}r.push(t.QNAME),n.push(u)}else{if("="==o.charAt(i)){r.push(t.GREATERTHANOREQUAL),n.push(">="),i++,s=o.charAt(i++);continue}r.push(t.GREATERTHAN),n.push(">"),s=o.charAt(i++)}else{if("="==o.charAt(i)){r.push(t.LESSTHANOREQUAL),n.push("<="),i++,s=o.charAt(i++);continue}r.push(t.LESSTHAN),n.push("<"),s=o.charAt(i++)}else r.push(t.NOTEQUAL),n.push("!="),i++,s=o.charAt(i++);else{if(s=o.charAt(i++),"/"==s){r.push(t.DOUBLESLASH),n.push("//"),s=o.charAt(i++);continue}r.push(t.SLASH),n.push("/")}else r.push(t.DOUBLECOLON),n.push("::"),i++,s=o.charAt(i++);else{if(r.length>0){var c=r[r.length-1];if(c!=t.AT&&c!=t.DOUBLECOLON&&c!=t.LEFTPARENTHESIS&&c!=t.LEFTBRACKET&&c!=t.AND&&c!=t.OR&&c!=t.MOD&&c!=t.DIV&&c!=t.MULTIPLYOPERATOR&&c!=t.SLASH&&c!=t.DOUBLESLASH&&c!=t.BAR&&c!=t.PLUS&&c!=t.MINUS&&c!=t.EQUALS&&c!=t.NOTEQUAL&&c!=t.LESSTHAN&&c!=t.LESSTHANOREQUAL&&c!=t.GREATERTHAN&&c!=t.GREATERTHANOREQUAL){r.push(t.MULTIPLYOPERATOR),n.push(s),s=o.charAt(i++);continue}}r.push(t.ASTERISKNAMETEST),n.push(s),s=o.charAt(i++)}else{for(var l=s,p="";i<o.length&&(s=o.charAt(i))!==l;)p+=s,i+=1;if(s!==l)throw Y.fromMessage("Unterminated string literal: "+l+p);i+=1,r.push(t.LITERAL),n.push(p),s=o.charAt(i++)}else{if(s=o.charAt(i++),"."==s){r.push(t.DOUBLEDOT),n.push(".."),s=o.charAt(i++);continue}if(s>="0"&&s<="9"){var a="."+s;for(s=o.charAt(i++);s>="0"&&s<="9";)a+=s,s=o.charAt(i++);r.push(t.NUMBER),n.push(a);continue}r.push(t.DOT),n.push(".")}else r.push(t.DOLLAR),n.push(s),s=o.charAt(i++);else r.push(t.EQUALS),n.push(s),s=o.charAt(i++);else r.push(t.MINUS),n.push(s),s=o.charAt(i++);else r.push(t.PLUS),n.push(s),s=o.charAt(i++);else r.push(t.BAR),n.push(s),s=o.charAt(i++);else r.push(t.COMMA),n.push(s),s=o.charAt(i++);else r.push(t.AT),n.push(s),s=o.charAt(i++);else r.push(t.RIGHTBRACKET),n.push(s),s=o.charAt(i++);else r.push(t.LEFTBRACKET),n.push(s),s=o.charAt(i++);else r.push(t.RIGHTPARENTHESIS),n.push(s),s=o.charAt(i++);else r.push(t.LEFTPARENTHESIS),n.push(s),s=o.charAt(i++)}return r.push(1),n.push("[EOF]"),[r,n]},t.SHIFT="s",t.REDUCE="r",t.ACCEPT="a",t.prototype.parse=function(e){var n,o,i=this.tokenize(e);if(void 0!=i){n=i[0],o=i[1];var e,s,a,u=0,c=[],l=[],p=[];for(c.push(0),l.push(1),p.push("_S"),s=n[u],a=o[u++];;)switch(e=c[c.length-1],t.actionTable[e].charAt(s-1)){case t.SHIFT:l.push(-s),p.push(a),c.push(t.actionTableNumber[e].charCodeAt(s-1)-32),s=n[u],a=o[u++];break;case t.REDUCE:for(var h=t.productions[t.actionTableNumber[e].charCodeAt(s-1)-32][1],f=[],m=0;m<h;m++)l.pop(),f.unshift(p.pop()),c.pop();var d=c[c.length-1];l.push(t.productions[t.actionTableNumber[e].charCodeAt(s-1)-32][0]),void 0==this.reduceActions[t.actionTableNumber[e].charCodeAt(s-1)-32]?p.push(f[0]):p.push(this.reduceActions[t.actionTableNumber[e].charCodeAt(s-1)-32](f)),c.push(t.gotoTable[d].charCodeAt(t.productions[t.actionTableNumber[e].charCodeAt(s-1)-32][0]-2)-33);break;case t.ACCEPT:return new r(p.pop());default:throw new Error("XPath parse error")}}},r.prototype=new Object,r.prototype.constructor=r,r.superclass=Object.prototype,r.prototype.toString=function(){return this.expression.toString()},r.prototype.evaluate=function(e){if(e.contextNode=e.expressionContextNode,e.contextSize=1,e.contextPosition=1,e.caseInsensitive=!1,null!=e.contextNode){var t=e.contextNode;9!=t.nodeType&&(t=t.ownerDocument);try{e.caseInsensitive=t.implementation.hasFeature("HTML","2.0")}catch(t){e.caseInsensitive=!0}}return this.expression.evaluate(e)},r.XML_NAMESPACE_URI="http://www.w3.org/XML/1998/namespace",r.XMLNS_NAMESPACE_URI="http://www.w3.org/2000/xmlns/",n.prototype=new Object,n.prototype.constructor=n,n.superclass=Object.prototype,n.prototype.init=function(){},n.prototype.toString=function(){return"<Expression>"},n.prototype.evaluate=function(e){throw new Error("Could not evaluate expression.")},o.prototype=new n,o.prototype.constructor=o,o.superclass=n.prototype,o.prototype.init=function(e){this.rhs=e},i.prototype=new o,i.prototype.constructor=i,i.superclass=o.prototype,i.prototype.init=function(e){i.superclass.init.call(this,e)},i.prototype.evaluate=function(e){return this.rhs.evaluate(e).number().negate()},i.prototype.toString=function(){return"-"+this.rhs.toString()},s.prototype=new n,s.prototype.constructor=s,s.superclass=n.prototype,s.prototype.init=function(e,t){this.lhs=e,this.rhs=t},a.prototype=new s,a.prototype.constructor=a,a.superclass=s.prototype,a.prototype.init=function(e,t){a.superclass.init.call(this,e,t)},a.prototype.toString=function(){return"("+this.lhs.toString()+" or "+this.rhs.toString()+")"},a.prototype.evaluate=function(e){var t=this.lhs.evaluate(e).bool();return t.booleanValue()?t:this.rhs.evaluate(e).bool()},u.prototype=new s,u.prototype.constructor=u,u.superclass=s.prototype,u.prototype.init=function(e,t){u.superclass.init.call(this,e,t)},u.prototype.toString=function(){return"("+this.lhs.toString()+" and "+this.rhs.toString()+")"},u.prototype.evaluate=function(e){var t=this.lhs.evaluate(e).bool();return t.booleanValue()?this.rhs.evaluate(e).bool():t},c.prototype=new s,c.prototype.constructor=c,c.superclass=s.prototype,c.prototype.init=function(e,t){c.superclass.init.call(this,e,t)},c.prototype.toString=function(){return"("+this.lhs.toString()+" = "+this.rhs.toString()+")"},c.prototype.evaluate=function(e){return this.lhs.evaluate(e).equals(this.rhs.evaluate(e))},l.prototype=new s,l.prototype.constructor=l,l.superclass=s.prototype,l.prototype.init=function(e,t){l.superclass.init.call(this,e,t)},l.prototype.toString=function(){return"("+this.lhs.toString()+" != "+this.rhs.toString()+")"},l.prototype.evaluate=function(e){return this.lhs.evaluate(e).notequal(this.rhs.evaluate(e))},p.prototype=new s,p.prototype.constructor=p,p.superclass=s.prototype,p.prototype.init=function(e,t){p.superclass.init.call(this,e,t)},p.prototype.evaluate=function(e){return this.lhs.evaluate(e).lessthan(this.rhs.evaluate(e))},p.prototype.toString=function(){return"("+this.lhs.toString()+" < "+this.rhs.toString()+")"},h.prototype=new s,h.prototype.constructor=h,h.superclass=s.prototype,h.prototype.init=function(e,t){h.superclass.init.call(this,e,t)},h.prototype.evaluate=function(e){return this.lhs.evaluate(e).greaterthan(this.rhs.evaluate(e))},h.prototype.toString=function(){return"("+this.lhs.toString()+" > "+this.rhs.toString()+")"},f.prototype=new s,f.prototype.constructor=f,f.superclass=s.prototype,f.prototype.init=function(e,t){f.superclass.init.call(this,e,t)},f.prototype.evaluate=function(e){return this.lhs.evaluate(e).lessthanorequal(this.rhs.evaluate(e))},f.prototype.toString=function(){return"("+this.lhs.toString()+" <= "+this.rhs.toString()+")"},m.prototype=new s,m.prototype.constructor=m,m.superclass=s.prototype,m.prototype.init=function(e,t){m.superclass.init.call(this,e,t)},m.prototype.evaluate=function(e){return this.lhs.evaluate(e).greaterthanorequal(this.rhs.evaluate(e))},m.prototype.toString=function(){return"("+this.lhs.toString()+" >= "+this.rhs.toString()+")"},d.prototype=new s,d.prototype.constructor=d,d.superclass=s.prototype,d.prototype.init=function(e,t){d.superclass.init.call(this,e,t)},d.prototype.evaluate=function(e){return this.lhs.evaluate(e).number().plus(this.rhs.evaluate(e).number())},d.prototype.toString=function(){return"("+this.lhs.toString()+" + "+this.rhs.toString()+")"},g.prototype=new s,g.prototype.constructor=g,g.superclass=s.prototype,g.prototype.init=function(e,t){g.superclass.init.call(this,e,t)},g.prototype.evaluate=function(e){return this.lhs.evaluate(e).number().minus(this.rhs.evaluate(e).number())},g.prototype.toString=function(){return"("+this.lhs.toString()+" - "+this.rhs.toString()+")"},y.prototype=new s,y.prototype.constructor=y,y.superclass=s.prototype,y.prototype.init=function(e,t){y.superclass.init.call(this,e,t)},y.prototype.evaluate=function(e){return this.lhs.evaluate(e).number().multiply(this.rhs.evaluate(e).number())},y.prototype.toString=function(){return"("+this.lhs.toString()+" * "+this.rhs.toString()+")"},E.prototype=new s,E.prototype.constructor=E,E.superclass=s.prototype,E.prototype.init=function(e,t){E.superclass.init.call(this,e,t)},E.prototype.evaluate=function(e){return this.lhs.evaluate(e).number().div(this.rhs.evaluate(e).number());
},E.prototype.toString=function(){return"("+this.lhs.toString()+" div "+this.rhs.toString()+")"},v.prototype=new s,v.prototype.constructor=v,v.superclass=s.prototype,v.prototype.init=function(e,t){v.superclass.init.call(this,e,t)},v.prototype.evaluate=function(e){return this.lhs.evaluate(e).number().mod(this.rhs.evaluate(e).number())},v.prototype.toString=function(){return"("+this.lhs.toString()+" mod "+this.rhs.toString()+")"},A.prototype=new s,A.prototype.constructor=A,A.superclass=s.prototype,A.prototype.init=function(e,t){A.superclass.init.call(this,e,t)},A.prototype.evaluate=function(e){return this.lhs.evaluate(e).nodeset().union(this.rhs.evaluate(e).nodeset())},A.prototype.toString=function(){return this.lhs.toString()+" | "+this.rhs.toString()},w.prototype=new n,w.prototype.constructor=w,w.superclass=n.prototype,w.prototype.init=function(e,t,r){w.superclass.init.call(this),this.filter=e,this.filterPredicates=t,this.locationPath=r},w.prototype.evaluate=function(e){var t,n=new _;if(n.variableResolver=e.variableResolver,n.functionResolver=e.functionResolver,n.namespaceResolver=e.namespaceResolver,n.expressionContextNode=e.expressionContextNode,n.virtualRoot=e.virtualRoot,n.caseInsensitive=e.caseInsensitive,null==this.filter)t=[e.contextNode];else{var o=this.filter.evaluate(e);if(!G.instance_of(o,O)){if(null!=this.filterPredicates&&this.filterPredicates.length>0||null!=this.locationPath)throw new Error("Path expression filter must evaluate to a nodset if predicates or location path are used");return o}if(t=o.toUnsortedArray(),null!=this.filterPredicates)for(var i=0;i<this.filterPredicates.length;i++){var s=this.filterPredicates[i],a=[];for(n.contextSize=t.length,n.contextPosition=1;n.contextPosition<=n.contextSize;n.contextPosition++)n.contextNode=t[n.contextPosition-1],this.predicateMatches(s,n)&&a.push(n.contextNode);t=a}}if(null!=this.locationPath){if(this.locationPath.absolute)if(9!=t[0].nodeType)if(null!=n.virtualRoot)t=[n.virtualRoot];else if(null==t[0].ownerDocument){for(var u=t[0];null!=u.parentNode;)u=u.parentNode;t=[u]}else t=[t[0].ownerDocument];else t=[t[0]];for(var c=0;c<this.locationPath.steps.length;c++){for(var l=this.locationPath.steps[c],a=[],i=0;i<t.length;i++)switch(n.contextNode=t[i],l.axis){case b.ANCESTOR:if(n.contextNode===n.virtualRoot)break;var p;for(p=2==n.contextNode.nodeType?this.getOwnerElement(n.contextNode):n.contextNode.parentNode;null!=p&&(l.nodeTest.matches(p,n)&&a.push(p),p!==n.virtualRoot);)p=p.parentNode;break;case b.ANCESTORORSELF:for(var p=n.contextNode;null!=p&&(l.nodeTest.matches(p,n)&&a.push(p),p!==n.virtualRoot);p=2==p.nodeType?this.getOwnerElement(p):p.parentNode);break;case b.ATTRIBUTE:var h=n.contextNode.attributes;if(null!=h)for(var f=0;f<h.length;f++){var p=h.item(f);l.nodeTest.matches(p,n)&&a.push(p)}break;case b.CHILD:for(var p=n.contextNode.firstChild;null!=p;p=p.nextSibling)l.nodeTest.matches(p,n)&&a.push(p);break;case b.DESCENDANT:for(var m=[n.contextNode.firstChild];m.length>0;)for(var p=m.pop();null!=p;)l.nodeTest.matches(p,n)&&a.push(p),null!=p.firstChild?(m.push(p.nextSibling),p=p.firstChild):p=p.nextSibling;break;case b.DESCENDANTORSELF:l.nodeTest.matches(n.contextNode,n)&&a.push(n.contextNode);for(var m=[n.contextNode.firstChild];m.length>0;)for(var p=m.pop();null!=p;)l.nodeTest.matches(p,n)&&a.push(p),null!=p.firstChild?(m.push(p.nextSibling),p=p.firstChild):p=p.nextSibling;break;case b.FOLLOWING:if(n.contextNode===n.virtualRoot)break;var m=[];null!=n.contextNode.firstChild?m.unshift(n.contextNode.firstChild):m.unshift(n.contextNode.nextSibling);for(var p=n.contextNode.parentNode;null!=p&&9!=p.nodeType&&p!==n.virtualRoot;p=p.parentNode)m.unshift(p.nextSibling);do for(var p=m.pop();null!=p;)l.nodeTest.matches(p,n)&&a.push(p),null!=p.firstChild?(m.push(p.nextSibling),p=p.firstChild):p=p.nextSibling;while(m.length>0);break;case b.FOLLOWINGSIBLING:if(n.contextNode===n.virtualRoot)break;for(var p=n.contextNode.nextSibling;null!=p;p=p.nextSibling)l.nodeTest.matches(p,n)&&a.push(p);break;case b.NAMESPACE:var u={};if(1==n.contextNode.nodeType){u.xml=r.XML_NAMESPACE_URI,u.xmlns=r.XMLNS_NAMESPACE_URI;for(var p=n.contextNode;null!=p&&1==p.nodeType;p=p.parentNode)for(var f=0;f<p.attributes.length;f++){var d=p.attributes.item(f),g=String(d.name);if("xmlns"==g)void 0==u[""]&&(u[""]=d.value);else if(g.length>6&&"xmlns:"==g.substring(0,6)){var y=g.substring(6,g.length);void 0==u[y]&&(u[y]=d.value)}}for(var y in u){var E=new U(y,u[y],n.contextNode);l.nodeTest.matches(E,n)&&a.push(E)}}break;case b.PARENT:p=null,n.contextNode!==n.virtualRoot&&(p=2==n.contextNode.nodeType?this.getOwnerElement(n.contextNode):n.contextNode.parentNode),null!=p&&l.nodeTest.matches(p,n)&&a.push(p);break;case b.PRECEDING:var m;m=null!=n.virtualRoot?[n.virtualRoot]:[N(n.contextNode)];e:for(;m.length>0;)for(var p=m.pop();null!=p;){if(p==n.contextNode)break e;l.nodeTest.matches(p,n)&&a.unshift(p),null!=p.firstChild?(m.push(p.nextSibling),p=p.firstChild):p=p.nextSibling}break;case b.PRECEDINGSIBLING:if(n.contextNode===n.virtualRoot)break;for(var p=n.contextNode.previousSibling;null!=p;p=p.previousSibling)l.nodeTest.matches(p,n)&&a.push(p);break;case b.SELF:l.nodeTest.matches(n.contextNode,n)&&a.push(n.contextNode)}t=a;for(var i=0;i<l.predicates.length;i++){var s=l.predicates[i],a=[];for(n.contextSize=t.length,n.contextPosition=1;n.contextPosition<=n.contextSize;n.contextPosition++)n.contextNode=t[n.contextPosition-1],this.predicateMatches(s,n)&&a.push(n.contextNode);t=a}}}var o=new O;return o.addArray(t),o},w.prototype.predicateMatches=function(e,t){var r=e.evaluate(t);return G.instance_of(r,C)?t.contextPosition==r.numberValue():r.booleanValue()},w.prototype.toString=function(){if(void 0!=this.filter){var e=this.filter.toString();if(G.instance_of(this.filter,I)&&(e="'"+e+"'"),void 0!=this.filterPredicates)for(var t=0;t<this.filterPredicates.length;t++)e=e+"["+this.filterPredicates[t].toString()+"]";return void 0!=this.locationPath&&(this.locationPath.absolute||(e+="/"),e+=this.locationPath.toString()),e}return this.locationPath.toString()},w.prototype.getOwnerElement=function(e){if(e.ownerElement)return e.ownerElement;try{if(e.selectSingleNode)return e.selectSingleNode("..")}catch(e){}for(var t=9==e.nodeType?e:e.ownerDocument,r=t.getElementsByTagName("*"),n=0;n<r.length;n++)for(var o=r.item(n),i=o.attributes,s=0;s<i.length;s++){var a=i.item(s);if(a===e)return o}return null},S.prototype=new Object,S.prototype.constructor=S,S.superclass=Object.prototype,S.prototype.init=function(e,t){this.absolute=e,this.steps=t},S.prototype.toString=function(){var e;e=this.absolute?"/":"";for(var t=0;t<this.steps.length;t++)0!=t&&(e+="/"),e+=this.steps[t].toString();return e},b.prototype=new Object,b.prototype.constructor=b,b.superclass=Object.prototype,b.prototype.init=function(e,t,r){this.axis=e,this.nodeTest=t,this.predicates=r},b.prototype.toString=function(){var e;switch(this.axis){case b.ANCESTOR:e="ancestor";break;case b.ANCESTORORSELF:e="ancestor-or-self";break;case b.ATTRIBUTE:e="attribute";break;case b.CHILD:e="child";break;case b.DESCENDANT:e="descendant";break;case b.DESCENDANTORSELF:e="descendant-or-self";break;case b.FOLLOWING:e="following";break;case b.FOLLOWINGSIBLING:e="following-sibling";break;case b.NAMESPACE:e="namespace";break;case b.PARENT:e="parent";break;case b.PRECEDING:e="preceding";break;case b.PRECEDINGSIBLING:e="preceding-sibling";break;case b.SELF:e="self"}e+="::",e+=this.nodeTest.toString();for(var t=0;t<this.predicates.length;t++)e+="["+this.predicates[t].toString()+"]";return e},b.ANCESTOR=0,b.ANCESTORORSELF=1,b.ATTRIBUTE=2,b.CHILD=3,b.DESCENDANT=4,b.DESCENDANTORSELF=5,b.FOLLOWING=6,b.FOLLOWINGSIBLING=7,b.NAMESPACE=8,b.PARENT=9,b.PRECEDING=10,b.PRECEDINGSIBLING=11,b.SELF=12,T.prototype=new Object,T.prototype.constructor=T,T.superclass=Object.prototype,T.prototype.init=function(e,t){this.type=e,this.value=t},T.prototype.toString=function(){switch(this.type){case T.NAMETESTANY:return"*";case T.NAMETESTPREFIXANY:return this.value+":*";case T.NAMETESTRESOLVEDANY:return"{"+this.value+"}*";case T.NAMETESTQNAME:return this.value;case T.NAMETESTRESOLVEDNAME:return"{"+this.namespaceURI+"}"+this.value;case T.COMMENT:return"comment()";case T.TEXT:return"text()";case T.PI:return void 0!=this.value?'processing-instruction("'+this.value+'")':"processing-instruction()";case T.NODE:return"node()"}return"<unknown nodetest type>"},T.prototype.matches=function(e,t){var r=e.nodeType;switch(this.type){case T.NAMETESTANY:return 2===r||1===r||r===U.XPATH_NAMESPACE_NODE;case T.NAMETESTPREFIXANY:if(2===r||1===r){var n=t.namespaceResolver.getNamespace(this.value,t.expressionContextNode);if(null==n)throw new Error("Cannot resolve QName "+this.value);return n===(e.namespaceURI||"")}return!1;case T.NAMETESTQNAME:if(2===r||1===r||r===U.XPATH_NAMESPACE_NODE){var o=G.resolveQName(this.value,t.namespaceResolver,t.expressionContextNode,!1);if(null==o[0])throw new Error("Cannot resolve QName "+this.value);o[0]=String(o[0])||null,o[1]=String(o[1]);var i=[String(e.namespaceURI||"")||null,String(e.localName||e.nodeName)];return t.caseInsensitive?o[0]===i[0]&&o[1].toLowerCase()===i[1].toLowerCase():o[0]===i[0]&&o[1]===i[1]}return!1;case T.COMMENT:return 8===r;case T.TEXT:return 3===r||4==r;case T.PI:return 7===r&&(null==this.value||e.nodeName==this.value);case T.NODE:return 9===r||1===r||2===r||3===r||4===r||8===r||7===r}return!1},T.NAMETESTANY=0,T.NAMETESTPREFIXANY=1,T.NAMETESTQNAME=2,T.COMMENT=3;T.TEXT=4;T.PI=5,T.NODE=6,x.prototype=new n,x.prototype.constructor=x,x.superclass=n.prototype,x.prototype.init=function(e){this.variable=e},x.prototype.toString=function(){return"$"+this.variable},x.prototype.evaluate=function(e){var t=G.resolveQName(this.variable,e.namespaceResolver,e.contextNode,!1);if(null==t[0])throw new Error("Cannot resolve QName "+fn);var r=e.variableResolver.getVariable(t[1],t[0]);if(!r)throw Y.fromMessage("Undeclared variable: "+this.toString());return r},R.prototype=new n,R.prototype.constructor=R,R.superclass=n.prototype,R.prototype.init=function(e,t){this.functionName=e,this.arguments=t},R.prototype.toString=function(){for(var e=this.functionName+"(",t=0;t<this.arguments.length;t++)t>0&&(e+=", "),e+=this.arguments[t].toString();return e+")"},R.prototype.evaluate=function(e){var t=V.getFunctionFromContext(this.functionName,e);if(!t)throw new Error("Unknown function "+this.functionName);var r=[e].concat(this.arguments);return t.apply(e.functionResolver.thisArg,r)},I.prototype=new n,I.prototype.constructor=I,I.superclass=n.prototype,I.prototype.init=function(e){this.str=String(e)},I.prototype.toString=function(){return this.str},I.prototype.evaluate=function(e){return this},I.prototype.string=function(){return this},I.prototype.number=function(){return new C(this.str)},I.prototype.bool=function(){return new L(this.str)},I.prototype.nodeset=function(){throw new Error("Cannot convert string to nodeset")},I.prototype.stringValue=function(){return this.str},I.prototype.numberValue=function(){return this.number().numberValue()},I.prototype.booleanValue=function(){return this.bool().booleanValue()},I.prototype.equals=function(e){return G.instance_of(e,L)?this.bool().equals(e):G.instance_of(e,C)?this.number().equals(e):G.instance_of(e,O)?e.compareWithString(this,j.equals):new L(this.str==e.str)},I.prototype.notequal=function(e){return G.instance_of(e,L)?this.bool().notequal(e):G.instance_of(e,C)?this.number().notequal(e):G.instance_of(e,O)?e.compareWithString(this,j.notequal):new L(this.str!=e.str)},I.prototype.lessthan=function(e){return G.instance_of(e,O)?e.compareWithNumber(this.number(),j.greaterthanorequal):this.number().lessthan(e.number())},I.prototype.greaterthan=function(e){return G.instance_of(e,O)?e.compareWithNumber(this.number(),j.lessthanorequal):this.number().greaterthan(e.number())},I.prototype.lessthanorequal=function(e){return G.instance_of(e,O)?e.compareWithNumber(this.number(),j.greaterthan):this.number().lessthanorequal(e.number())},I.prototype.greaterthanorequal=function(e){return G.instance_of(e,O)?e.compareWithNumber(this.number(),j.lessthan):this.number().greaterthanorequal(e.number())},C.prototype=new n,C.prototype.constructor=C,C.superclass=n.prototype,C.prototype.init=function(e){this.num="string"==typeof e?this.parse(e):Number(e)},C.prototype.numberFormat=/^\s*-?[0-9]*\.?[0-9]+\s*$/,C.prototype.parse=function(e){return this.numberFormat.test(e)?parseFloat(e):Number.NaN},C.prototype.toString=function(){return this.num},C.prototype.evaluate=function(e){return this},C.prototype.string=function(){return new I(this.num)},C.prototype.number=function(){return this},C.prototype.bool=function(){return new L(this.num)},C.prototype.nodeset=function(){throw new Error("Cannot convert number to nodeset")},C.prototype.stringValue=function(){return this.string().stringValue()},C.prototype.numberValue=function(){return this.num},C.prototype.booleanValue=function(){return this.bool().booleanValue()},C.prototype.negate=function(){return new C(-this.num)},C.prototype.equals=function(e){return G.instance_of(e,L)?this.bool().equals(e):G.instance_of(e,I)?this.equals(e.number()):G.instance_of(e,O)?e.compareWithNumber(this,j.equals):new L(this.num==e.num)},C.prototype.notequal=function(e){return G.instance_of(e,L)?this.bool().notequal(e):G.instance_of(e,I)?this.notequal(e.number()):G.instance_of(e,O)?e.compareWithNumber(this,j.notequal):new L(this.num!=e.num)},C.prototype.lessthan=function(e){return G.instance_of(e,O)?e.compareWithNumber(this,j.greaterthanorequal):G.instance_of(e,L)||G.instance_of(e,I)?this.lessthan(e.number()):new L(this.num<e.num)},C.prototype.greaterthan=function(e){return G.instance_of(e,O)?e.compareWithNumber(this,j.lessthanorequal):G.instance_of(e,L)||G.instance_of(e,I)?this.greaterthan(e.number()):new L(this.num>e.num)},C.prototype.lessthanorequal=function(e){return G.instance_of(e,O)?e.compareWithNumber(this,j.greaterthan):G.instance_of(e,L)||G.instance_of(e,I)?this.lessthanorequal(e.number()):new L(this.num<=e.num)},C.prototype.greaterthanorequal=function(e){return G.instance_of(e,O)?e.compareWithNumber(this,j.lessthan):G.instance_of(e,L)||G.instance_of(e,I)?this.greaterthanorequal(e.number()):new L(this.num>=e.num)},C.prototype.plus=function(e){return new C(this.num+e.num)},C.prototype.minus=function(e){return new C(this.num-e.num)},C.prototype.multiply=function(e){return new C(this.num*e.num)},C.prototype.div=function(e){return new C(this.num/e.num)},C.prototype.mod=function(e){return new C(this.num%e.num)},L.prototype=new n,L.prototype.constructor=L,L.superclass=n.prototype,L.prototype.init=function(e){this.b=Boolean(e)},L.prototype.toString=function(){return this.b.toString()},L.prototype.evaluate=function(e){return this},L.prototype.string=function(){return new I(this.b)},L.prototype.number=function(){return new C(this.b)},L.prototype.bool=function(){return this},L.prototype.nodeset=function(){throw new Error("Cannot convert boolean to nodeset")},L.prototype.stringValue=function(){return this.string().stringValue()},L.prototype.numberValue=function(){return this.num().numberValue()},L.prototype.booleanValue=function(){return this.b},L.prototype.not=function(){return new L(!this.b)},L.prototype.equals=function(e){return G.instance_of(e,I)||G.instance_of(e,C)?this.equals(e.bool()):G.instance_of(e,O)?e.compareWithBoolean(this,j.equals):new L(this.b==e.b)},L.prototype.notequal=function(e){return G.instance_of(e,I)||G.instance_of(e,C)?this.notequal(e.bool()):G.instance_of(e,O)?e.compareWithBoolean(this,j.notequal):new L(this.b!=e.b)},L.prototype.lessthan=function(e){return G.instance_of(e,O)?e.compareWithNumber(this.number(),j.greaterthanorequal):this.number().lessthan(e.number())},L.prototype.greaterthan=function(e){return G.instance_of(e,O)?e.compareWithNumber(this.number(),j.lessthanorequal):this.number().greaterthan(e.number())},L.prototype.lessthanorequal=function(e){return G.instance_of(e,O)?e.compareWithNumber(this.number(),j.greaterthan):this.number().lessthanorequal(e.number())},L.prototype.greaterthanorequal=function(e){return G.instance_of(e,O)?e.compareWithNumber(this.number(),j.lessthan):this.number().greaterthanorequal(e.number())},M.prototype=new Object,M.prototype.constructor=M,M.superclass=Object.prototype,M.prototype.init=function(e){this.left=null,this.right=null,this.node=e,this.depth=1},M.prototype.balance=function(){var e=null==this.left?0:this.left.depth,t=null==this.right?0:this.right.depth;if(e>t+1){var r=null==this.left.left?0:this.left.left.depth,n=null==this.left.right?0:this.left.right.depth;r<n&&this.left.rotateRR(),this.rotateLL()}else if(e+1<t){var o=null==this.right.right?0:this.right.right.depth,i=null==this.right.left?0:this.right.left.depth;i>o&&this.right.rotateLL(),this.rotateRR()}},M.prototype.rotateLL=function(){var e=this.node,t=this.right;this.node=this.left.node,this.right=this.left,this.left=this.left.left,this.right.left=this.right.right,this.right.right=t,this.right.node=e,this.right.updateInNewLocation(),this.updateInNewLocation()},M.prototype.rotateRR=function(){var e=this.node,t=this.left;this.node=this.right.node,this.left=this.right,this.right=this.right.right,this.left.right=this.left.left,this.left.left=t,this.left.node=e,this.left.updateInNewLocation(),this.updateInNewLocation()},M.prototype.updateInNewLocation=function(){this.getDepthFromChildren()},M.prototype.getDepthFromChildren=function(){this.depth=null==this.node?0:1,null!=this.left&&(this.depth=this.left.depth+1),null!=this.right&&this.depth<=this.right.depth&&(this.depth=this.right.depth+1)},M.prototype.add=function(e){if(e===this.node)return!1;var t=D(e,this.node),r=!1;return t==-1?null==this.left?(this.left=new M(e),r=!0):(r=this.left.add(e),r&&this.balance()):1==t&&(null==this.right?(this.right=new M(e),r=!0):(r=this.right.add(e),r&&this.balance())),r&&this.getDepthFromChildren(),r},O.prototype=new n,O.prototype.constructor=O,O.superclass=n.prototype,O.prototype.init=function(){this.tree=null,this.nodes=[],this.size=0},O.prototype.toString=function(){var e=this.first();return null==e?"":this.stringForNode(e)},O.prototype.evaluate=function(e){return this},O.prototype.string=function(){return new I(this.toString())},O.prototype.stringValue=function(){return this.toString()},O.prototype.number=function(){return new C(this.string())},O.prototype.numberValue=function(){return Number(this.string())},O.prototype.bool=function(){return new L(this.booleanValue())},O.prototype.booleanValue=function(){return!!this.size},O.prototype.nodeset=function(){return this},O.prototype.stringForNode=function(e){return 9==e.nodeType||1==e.nodeType||11===e.nodeType?this.stringForContainerNode(e):2===e.nodeType?e.value||e.nodeValue:e.isNamespaceNode?e.namespace:e.nodeValue},O.prototype.stringForContainerNode=function(e){for(var t="",r=e.firstChild;null!=r;r=r.nextSibling){var n=r.nodeType;1!==n&&3!==n&&4!==n&&9!==n&&11!==n||(t+=this.stringForNode(r))}return t},O.prototype.buildTree=function(){if(!this.tree&&this.nodes.length){this.tree=new M(this.nodes[0]);for(var e=1;e<this.nodes.length;e+=1)this.tree.add(this.nodes[e])}return this.tree},O.prototype.first=function(){var e=this.buildTree();if(null==e)return null;for(;null!=e.left;)e=e.left;return e.node},O.prototype.add=function(e){for(var t=0;t<this.nodes.length;t+=1)if(e===this.nodes[t])return;this.tree=null,this.nodes.push(e),this.size+=1},O.prototype.addArray=function(e){for(var t=0;t<e.length;t+=1)this.add(e[t])},O.prototype.toArray=function(){var e=[];return this.toArrayRec(this.buildTree(),e),e},O.prototype.toArrayRec=function(e,t){null!=e&&(this.toArrayRec(e.left,t),t.push(e.node),this.toArrayRec(e.right,t))},O.prototype.toUnsortedArray=function(){return this.nodes.slice()},O.prototype.compareWithString=function(e,t){for(var r=this.toUnsortedArray(),n=0;n<r.length;n++){var o=r[n],i=new I(this.stringForNode(o)),s=t(i,e);if(s.booleanValue())return s}return new L(!1)},O.prototype.compareWithNumber=function(e,t){for(var r=this.toUnsortedArray(),n=0;n<r.length;n++){var o=r[n],i=new C(this.stringForNode(o)),s=t(i,e);if(s.booleanValue())return s}return new L(!1)},O.prototype.compareWithBoolean=function(e,t){return t(this.bool(),e)},O.prototype.compareWithNodeSet=function(e,t){for(var r=this.toUnsortedArray(),n=0;n<r.length;n++)for(var o=r[n],i=new I(this.stringForNode(o)),s=e.toUnsortedArray(),a=0;a<s.length;a++){var u=s[a],e=new I(this.stringForNode(u)),c=t(i,e);if(c.booleanValue())return c}return new L(!1)},O.prototype.equals=function(e){return G.instance_of(e,I)?this.compareWithString(e,j.equals):G.instance_of(e,C)?this.compareWithNumber(e,j.equals):G.instance_of(e,L)?this.compareWithBoolean(e,j.equals):this.compareWithNodeSet(e,j.equals)},O.prototype.notequal=function(e){return G.instance_of(e,I)?this.compareWithString(e,j.notequal):G.instance_of(e,C)?this.compareWithNumber(e,j.notequal):G.instance_of(e,L)?this.compareWithBoolean(e,j.notequal):this.compareWithNodeSet(e,j.notequal)},O.prototype.lessthan=function(e){return G.instance_of(e,I)?this.compareWithNumber(e.number(),j.lessthan):G.instance_of(e,C)?this.compareWithNumber(e,j.lessthan):G.instance_of(e,L)?this.compareWithBoolean(e,j.lessthan):this.compareWithNodeSet(e,j.lessthan)},O.prototype.greaterthan=function(e){return G.instance_of(e,I)?this.compareWithNumber(e.number(),j.greaterthan):G.instance_of(e,C)?this.compareWithNumber(e,j.greaterthan):G.instance_of(e,L)?this.compareWithBoolean(e,j.greaterthan):this.compareWithNodeSet(e,j.greaterthan)},O.prototype.lessthanorequal=function(e){return G.instance_of(e,I)?this.compareWithNumber(e.number(),j.lessthanorequal):G.instance_of(e,C)?this.compareWithNumber(e,j.lessthanorequal):G.instance_of(e,L)?this.compareWithBoolean(e,j.lessthanorequal):this.compareWithNodeSet(e,j.lessthanorequal)},O.prototype.greaterthanorequal=function(e){return G.instance_of(e,I)?this.compareWithNumber(e.number(),j.greaterthanorequal):G.instance_of(e,C)?this.compareWithNumber(e,j.greaterthanorequal):G.instance_of(e,L)?this.compareWithBoolean(e,j.greaterthanorequal):this.compareWithNodeSet(e,j.greaterthanorequal)},O.prototype.union=function(e){var t=new O;return t.addArray(this.toUnsortedArray()),t.addArray(e.toUnsortedArray()),t},U.prototype=new Object,U.prototype.constructor=U,U.superclass=Object.prototype,U.prototype.toString=function(){return'{ "'+this.prefix+'", "'+this.namespaceURI+'" }'};var j=new Object;j.equals=function(e,t){return e.equals(t)},j.notequal=function(e,t){return e.notequal(t)},j.lessthan=function(e,t){return e.lessthan(t)},j.greaterthan=function(e,t){return e.greaterthan(t)},j.lessthanorequal=function(e,t){return e.lessthanorequal(t)},j.greaterthanorequal=function(e,t){return e.greaterthanorequal(t)},_.prototype=new Object,_.prototype.constructor=_,_.superclass=Object.prototype,P.prototype=new Object,P.prototype.constructor=P,P.superclass=Object.prototype,P.prototype.getVariable=function(e,t){return null},V.prototype=new Object,V.prototype.constructor=V,V.superclass=Object.prototype,V.prototype.addStandardFunctions=function(){this.functions["{}last"]=q.last,this.functions["{}position"]=q.position,this.functions["{}count"]=q.count,this.functions["{}id"]=q.id,this.functions["{}local-name"]=q.localName,this.functions["{}namespace-uri"]=q.namespaceURI,this.functions["{}name"]=q.name,this.functions["{}string"]=q.string,this.functions["{}concat"]=q.concat,this.functions["{}starts-with"]=q.startsWith,this.functions["{}contains"]=q.contains,this.functions["{}substring-before"]=q.substringBefore,this.functions["{}substring-after"]=q.substringAfter,this.functions["{}substring"]=q.substring,this.functions["{}string-length"]=q.stringLength,this.functions["{}normalize-space"]=q.normalizeSpace,this.functions["{}translate"]=q.translate,this.functions["{}boolean"]=q.boolean_,this.functions["{}not"]=q.not,this.functions["{}true"]=q.true_,this.functions["{}false"]=q.false_,this.functions["{}lang"]=q.lang,this.functions["{}number"]=q.number,this.functions["{}sum"]=q.sum,this.functions["{}floor"]=q.floor,this.functions["{}ceiling"]=q.ceiling,this.functions["{}round"]=q.round},V.prototype.addFunction=function(e,t,r){this.functions["{"+e+"}"+t]=r},V.getFunctionFromContext=function(e,t){var r=G.resolveQName(e,t.namespaceResolver,t.contextNode,!1);if(null===r[0])throw new Error("Cannot resolve QName "+name);return t.functionResolver.getFunction(r[1],r[0])},V.prototype.getFunction=function(e,t){return this.functions["{"+t+"}"+e]},B.prototype=new Object,B.prototype.constructor=B,B.superclass=Object.prototype,B.prototype.getNamespace=function(e,t){if("xml"==e)return r.XML_NAMESPACE_URI;if("xmlns"==e)return r.XMLNS_NAMESPACE_URI;for(9==t.nodeType?t=t.documentElement:2==t.nodeType?t=w.prototype.getOwnerElement(t):1!=t.nodeType&&(t=t.parentNode);null!=t&&1==t.nodeType;){for(var n=t.attributes,o=0;o<n.length;o++){var i=n.item(o),s=i.name||i.nodeName;if("xmlns"===s&&""===e||s==="xmlns:"+e)return String(i.value||i.nodeValue)}t=t.parentNode}return null};var q=new Object;q.last=function(){var e=arguments[0];if(1!=arguments.length)throw new Error("Function last expects ()");return new C(e.contextSize)},q.position=function(){var e=arguments[0];if(1!=arguments.length)throw new Error("Function position expects ()");return new C(e.contextPosition)},q.count=function(){var e,t=arguments[0];if(2!=arguments.length||!G.instance_of(e=arguments[1].evaluate(t),O))throw new Error("Function count expects (node-set)");return new C(e.size)},q.id=function(){var e,t=arguments[0];if(2!=arguments.length)throw new Error("Function id expects (object)");e=arguments[1].evaluate(t),e=G.instance_of(e,O)?e.toArray().join(" "):e.stringValue();for(var r=e.split(/[\x0d\x0a\x09\x20]+/),n=0,o=new O,i=9==t.contextNode.nodeType?t.contextNode:t.contextNode.ownerDocument,s=0;s<r.length;s++){var a;a=i.getElementById?i.getElementById(r[s]):G.getElementById(i,r[s]),null!=a&&(o.add(a),n++)}return o},q.localName=function(){var e,t=arguments[0];if(1==arguments.length)e=t.contextNode;else{if(2!=arguments.length)throw new Error("Function local-name expects (node-set?)");e=arguments[1].evaluate(t).first()}return new I(null==e?"":e.localName||e.baseName||e.target||e.nodeName||"")},q.namespaceURI=function(){var e,t=arguments[0];if(1==arguments.length)e=t.contextNode;else{if(2!=arguments.length)throw new Error("Function namespace-uri expects (node-set?)");e=arguments[1].evaluate(t).first()}return new I(null==e?"":e.namespaceURI)},q.name=function(){var e,t=arguments[0];if(1==arguments.length)e=t.contextNode;else{if(2!=arguments.length)throw new Error("Function name expects (node-set?)");e=arguments[1].evaluate(t).first()}return new I(null==e?"":1==e.nodeType?e.nodeName:2==e.nodeType?e.name||e.nodeName:7===e.nodeType?e.target||e.nodeName:null==e.localName?"":e.localName)},q.string=function(){var e=arguments[0];if(1==arguments.length)return new I(O.prototype.stringForNode(e.contextNode));if(2==arguments.length)return arguments[1].evaluate(e).string();throw new Error("Function string expects (object?)")},q.concat=function(){var e=arguments[0];if(arguments.length<3)throw new Error("Function concat expects (string, string, string*)");for(var t="",r=1;r<arguments.length;r++)t+=arguments[r].evaluate(e).stringValue();return new I(t)},q.startsWith=function(){var e=arguments[0];if(3!=arguments.length)throw new Error("Function startsWith expects (string, string)");var t=arguments[1].evaluate(e).stringValue(),r=arguments[2].evaluate(e).stringValue();return new L(t.substring(0,r.length)==r)},q.contains=function(){var e=arguments[0];if(3!=arguments.length)throw new Error("Function contains expects (string, string)");var t=arguments[1].evaluate(e).stringValue(),r=arguments[2].evaluate(e).stringValue();return new L(t.indexOf(r)!==-1)},q.substringBefore=function(){var e=arguments[0];if(3!=arguments.length)throw new Error("Function substring-before expects (string, string)");var t=arguments[1].evaluate(e).stringValue(),r=arguments[2].evaluate(e).stringValue();return new I(t.substring(0,t.indexOf(r)))},q.substringAfter=function(){var e=arguments[0];if(3!=arguments.length)throw new Error("Function substring-after expects (string, string)");var t=arguments[1].evaluate(e).stringValue(),r=arguments[2].evaluate(e).stringValue();if(0==r.length)return new I(t);var n=t.indexOf(r);return new I(n==-1?"":t.substring(n+r.length))},q.substring=function(){var e=arguments[0];if(3!=arguments.length&&4!=arguments.length)throw new Error("Function substring expects (string, number, number?)");var t=arguments[1].evaluate(e).stringValue(),r=Math.round(arguments[2].evaluate(e).numberValue())-1,n=4==arguments.length?r+Math.round(arguments[3].evaluate(e).numberValue()):void 0;return new I(t.substring(r,n))},q.stringLength=function(){var e,t=arguments[0];if(1==arguments.length)e=O.prototype.stringForNode(t.contextNode);else{if(2!=arguments.length)throw new Error("Function string-length expects (string?)");e=arguments[1].evaluate(t).stringValue()}return new C(e.length)},q.normalizeSpace=function(){var e,t=arguments[0];if(1==arguments.length)e=O.prototype.stringForNode(t.contextNode);else{if(2!=arguments.length)throw new Error("Function normalize-space expects (string?)");e=arguments[1].evaluate(t).stringValue()}for(var r=0,n=e.length-1;G.isSpace(e.charCodeAt(n));)n--;for(var o="";r<=n&&G.isSpace(e.charCodeAt(r));)r++;for(;r<=n;)if(G.isSpace(e.charCodeAt(r)))for(o+=" ";r<=n&&G.isSpace(e.charCodeAt(r));)r++;else o+=e.charAt(r),r++;return new I(o)},q.translate=function(){var e=arguments[0];if(4!=arguments.length)throw new Error("Function translate expects (string, string, string)");for(var t=arguments[1].evaluate(e).stringValue(),r=arguments[2].evaluate(e).stringValue(),n=arguments[3].evaluate(e).stringValue(),o=[],i=0;i<r.length;i++){var s=r.charCodeAt(i);if(void 0==o[s]){var a=i>n.length?"":n.charAt(i);o[s]=a}}for(var u="",i=0;i<t.length;i++){var e=t.charCodeAt(i),c=o[e];u+=void 0==c?t.charAt(i):c}return new I(u)},q.boolean_=function(){var e=arguments[0];if(2!=arguments.length)throw new Error("Function boolean expects (object)");return arguments[1].evaluate(e).bool()},q.not=function(){var e=arguments[0];if(2!=arguments.length)throw new Error("Function not expects (object)");return arguments[1].evaluate(e).bool().not()},q.true_=function(){if(1!=arguments.length)throw new Error("Function true expects ()");return new L(!0)},q.false_=function(){if(1!=arguments.length)throw new Error("Function false expects ()");return new L(!1)},q.lang=function(){var e=arguments[0];if(2!=arguments.length)throw new Error("Function lang expects (string)");for(var t,n=e.contextNode;null!=n&&9!=n.nodeType;n=n.parentNode){var o=n.getAttributeNS(r.XML_NAMESPACE_URI,"lang");if(null!=o){t=String(o);break}}if(null==t)return new L(!1);var i=arguments[1].evaluate(e).stringValue();return new L(t.substring(0,i.length)==i&&(t.length==i.length||"-"==t.charAt(i.length)))},q.number=function(){var e=arguments[0];if(1!=arguments.length&&2!=arguments.length)throw new Error("Function number expects (object?)");return 1==arguments.length?new C(O.prototype.stringForNode(e.contextNode)):arguments[1].evaluate(e).number()},q.sum=function(){var e,t=arguments[0];if(2!=arguments.length||!G.instance_of(e=arguments[1].evaluate(t),O))throw new Error("Function sum expects (node-set)");e=e.toUnsortedArray();for(var r=0,n=0;n<e.length;n++)r+=new C(O.prototype.stringForNode(e[n])).numberValue();return new C(r)},q.floor=function(){var e=arguments[0];if(2!=arguments.length)throw new Error("Function floor expects (number)");return new C(Math.floor(arguments[1].evaluate(e).numberValue()))},q.ceiling=function(){var e=arguments[0];if(2!=arguments.length)throw new Error("Function ceiling expects (number)");return new C(Math.ceil(arguments[1].evaluate(e).numberValue()))},q.round=function(){var e=arguments[0];if(2!=arguments.length)throw new Error("Function round expects (number)");return new C(Math.round(arguments[1].evaluate(e).numberValue()))};var G=new Object;G.isAttribute=function(e){return e&&(2===e.nodeType||e.ownerElement);
},G.splitQName=function(e){var t=e.indexOf(":");return t==-1?[null,e]:[e.substring(0,t),e.substring(t+1)]},G.resolveQName=function(e,t,r,n){var o=G.splitQName(e);return null!=o[0]?o[0]=t.getNamespace(o[0],r):n?(o[0]=t.getNamespace("",r),null==o[0]&&(o[0]="")):o[0]="",o},G.isSpace=function(e){return 9==e||13==e||10==e||32==e},G.isLetter=function(e){return e>=65&&e<=90||e>=97&&e<=122||e>=192&&e<=214||e>=216&&e<=246||e>=248&&e<=255||e>=256&&e<=305||e>=308&&e<=318||e>=321&&e<=328||e>=330&&e<=382||e>=384&&e<=451||e>=461&&e<=496||e>=500&&e<=501||e>=506&&e<=535||e>=592&&e<=680||e>=699&&e<=705||902==e||e>=904&&e<=906||908==e||e>=910&&e<=929||e>=931&&e<=974||e>=976&&e<=982||986==e||988==e||990==e||992==e||e>=994&&e<=1011||e>=1025&&e<=1036||e>=1038&&e<=1103||e>=1105&&e<=1116||e>=1118&&e<=1153||e>=1168&&e<=1220||e>=1223&&e<=1224||e>=1227&&e<=1228||e>=1232&&e<=1259||e>=1262&&e<=1269||e>=1272&&e<=1273||e>=1329&&e<=1366||1369==e||e>=1377&&e<=1414||e>=1488&&e<=1514||e>=1520&&e<=1522||e>=1569&&e<=1594||e>=1601&&e<=1610||e>=1649&&e<=1719||e>=1722&&e<=1726||e>=1728&&e<=1742||e>=1744&&e<=1747||1749==e||e>=1765&&e<=1766||e>=2309&&e<=2361||2365==e||e>=2392&&e<=2401||e>=2437&&e<=2444||e>=2447&&e<=2448||e>=2451&&e<=2472||e>=2474&&e<=2480||2482==e||e>=2486&&e<=2489||e>=2524&&e<=2525||e>=2527&&e<=2529||e>=2544&&e<=2545||e>=2565&&e<=2570||e>=2575&&e<=2576||e>=2579&&e<=2600||e>=2602&&e<=2608||e>=2610&&e<=2611||e>=2613&&e<=2614||e>=2616&&e<=2617||e>=2649&&e<=2652||2654==e||e>=2674&&e<=2676||e>=2693&&e<=2699||2701==e||e>=2703&&e<=2705||e>=2707&&e<=2728||e>=2730&&e<=2736||e>=2738&&e<=2739||e>=2741&&e<=2745||2749==e||2784==e||e>=2821&&e<=2828||e>=2831&&e<=2832||e>=2835&&e<=2856||e>=2858&&e<=2864||e>=2866&&e<=2867||e>=2870&&e<=2873||2877==e||e>=2908&&e<=2909||e>=2911&&e<=2913||e>=2949&&e<=2954||e>=2958&&e<=2960||e>=2962&&e<=2965||e>=2969&&e<=2970||2972==e||e>=2974&&e<=2975||e>=2979&&e<=2980||e>=2984&&e<=2986||e>=2990&&e<=2997||e>=2999&&e<=3001||e>=3077&&e<=3084||e>=3086&&e<=3088||e>=3090&&e<=3112||e>=3114&&e<=3123||e>=3125&&e<=3129||e>=3168&&e<=3169||e>=3205&&e<=3212||e>=3214&&e<=3216||e>=3218&&e<=3240||e>=3242&&e<=3251||e>=3253&&e<=3257||3294==e||e>=3296&&e<=3297||e>=3333&&e<=3340||e>=3342&&e<=3344||e>=3346&&e<=3368||e>=3370&&e<=3385||e>=3424&&e<=3425||e>=3585&&e<=3630||3632==e||e>=3634&&e<=3635||e>=3648&&e<=3653||e>=3713&&e<=3714||3716==e||e>=3719&&e<=3720||3722==e||3725==e||e>=3732&&e<=3735||e>=3737&&e<=3743||e>=3745&&e<=3747||3749==e||3751==e||e>=3754&&e<=3755||e>=3757&&e<=3758||3760==e||e>=3762&&e<=3763||3773==e||e>=3776&&e<=3780||e>=3904&&e<=3911||e>=3913&&e<=3945||e>=4256&&e<=4293||e>=4304&&e<=4342||4352==e||e>=4354&&e<=4355||e>=4357&&e<=4359||4361==e||e>=4363&&e<=4364||e>=4366&&e<=4370||4412==e||4414==e||4416==e||4428==e||4430==e||4432==e||e>=4436&&e<=4437||4441==e||e>=4447&&e<=4449||4451==e||4453==e||4455==e||4457==e||e>=4461&&e<=4462||e>=4466&&e<=4467||4469==e||4510==e||4520==e||4523==e||e>=4526&&e<=4527||e>=4535&&e<=4536||4538==e||e>=4540&&e<=4546||4587==e||4592==e||4601==e||e>=7680&&e<=7835||e>=7840&&e<=7929||e>=7936&&e<=7957||e>=7960&&e<=7965||e>=7968&&e<=8005||e>=8008&&e<=8013||e>=8016&&e<=8023||8025==e||8027==e||8029==e||e>=8031&&e<=8061||e>=8064&&e<=8116||e>=8118&&e<=8124||8126==e||e>=8130&&e<=8132||e>=8134&&e<=8140||e>=8144&&e<=8147||e>=8150&&e<=8155||e>=8160&&e<=8172||e>=8178&&e<=8180||e>=8182&&e<=8188||8486==e||e>=8490&&e<=8491||8494==e||e>=8576&&e<=8578||e>=12353&&e<=12436||e>=12449&&e<=12538||e>=12549&&e<=12588||e>=44032&&e<=55203||e>=19968&&e<=40869||12295==e||e>=12321&&e<=12329},G.isNCNameChar=function(e){return e>=48&&e<=57||e>=1632&&e<=1641||e>=1776&&e<=1785||e>=2406&&e<=2415||e>=2534&&e<=2543||e>=2662&&e<=2671||e>=2790&&e<=2799||e>=2918&&e<=2927||e>=3047&&e<=3055||e>=3174&&e<=3183||e>=3302&&e<=3311||e>=3430&&e<=3439||e>=3664&&e<=3673||e>=3792&&e<=3801||e>=3872&&e<=3881||46==e||45==e||95==e||G.isLetter(e)||e>=768&&e<=837||e>=864&&e<=865||e>=1155&&e<=1158||e>=1425&&e<=1441||e>=1443&&e<=1465||e>=1467&&e<=1469||1471==e||e>=1473&&e<=1474||1476==e||e>=1611&&e<=1618||1648==e||e>=1750&&e<=1756||e>=1757&&e<=1759||e>=1760&&e<=1764||e>=1767&&e<=1768||e>=1770&&e<=1773||e>=2305&&e<=2307||2364==e||e>=2366&&e<=2380||2381==e||e>=2385&&e<=2388||e>=2402&&e<=2403||e>=2433&&e<=2435||2492==e||2494==e||2495==e||e>=2496&&e<=2500||e>=2503&&e<=2504||e>=2507&&e<=2509||2519==e||e>=2530&&e<=2531||2562==e||2620==e||2622==e||2623==e||e>=2624&&e<=2626||e>=2631&&e<=2632||e>=2635&&e<=2637||e>=2672&&e<=2673||e>=2689&&e<=2691||2748==e||e>=2750&&e<=2757||e>=2759&&e<=2761||e>=2763&&e<=2765||e>=2817&&e<=2819||2876==e||e>=2878&&e<=2883||e>=2887&&e<=2888||e>=2891&&e<=2893||e>=2902&&e<=2903||e>=2946&&e<=2947||e>=3006&&e<=3010||e>=3014&&e<=3016||e>=3018&&e<=3021||3031==e||e>=3073&&e<=3075||e>=3134&&e<=3140||e>=3142&&e<=3144||e>=3146&&e<=3149||e>=3157&&e<=3158||e>=3202&&e<=3203||e>=3262&&e<=3268||e>=3270&&e<=3272||e>=3274&&e<=3277||e>=3285&&e<=3286||e>=3330&&e<=3331||e>=3390&&e<=3395||e>=3398&&e<=3400||e>=3402&&e<=3405||3415==e||3633==e||e>=3636&&e<=3642||e>=3655&&e<=3662||3761==e||e>=3764&&e<=3769||e>=3771&&e<=3772||e>=3784&&e<=3789||e>=3864&&e<=3865||3893==e||3895==e||3897==e||3902==e||3903==e||e>=3953&&e<=3972||e>=3974&&e<=3979||e>=3984&&e<=3989||3991==e||e>=3993&&e<=4013||e>=4017&&e<=4023||4025==e||e>=8400&&e<=8412||8417==e||e>=12330&&e<=12335||12441==e||12442==e||183==e||720==e||721==e||903==e||1600==e||3654==e||3782==e||12293==e||e>=12337&&e<=12341||e>=12445&&e<=12446||e>=12540&&e<=12542},G.coalesceText=function(e){for(var t=e.firstChild;null!=t;t=t.nextSibling)if(3==t.nodeType||4==t.nodeType){var r=t.nodeValue,n=t;for(t=t.nextSibling;null!=t&&(3==t.nodeType||4==t.nodeType);){r+=t.nodeValue;var o=t;t=t.nextSibling,o.parentNode.removeChild(o)}if(4==n.nodeType){var i=n.parentNode;if(null==n.nextSibling)i.removeChild(n),i.appendChild(i.ownerDocument.createTextNode(r));else{var s=n.nextSibling;i.removeChild(n),i.insertBefore(i.ownerDocument.createTextNode(r),s)}}else n.nodeValue=r;if(null==t)break}else 1==t.nodeType&&G.coalesceText(t)},G.instance_of=function(e,t){for(;null!=e;){if(e.constructor===t)return!0;if(e===Object)return!1;e=e.constructor.superclass}return!1},G.getElementById=function(e,t){if(1==e.nodeType&&(e.getAttribute("id")==t||e.getAttributeNS(null,"id")==t))return e;for(var r=e.firstChild;null!=r;r=r.nextSibling){var n=G.getElementById(r,t);if(null!=n)return n}return null};var Y=function(){function e(e,r){var n=r?": "+r.toString():"";switch(e){case t.INVALID_EXPRESSION_ERR:return"Invalid expression"+n;case t.TYPE_ERR:return"Type error"+n}return null}function t(t,r,n){var o=Error.call(this,e(t,r)||n);return o.code=t,o.exception=r,o}return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t.superclass=Error,t.prototype.toString=function(){return this.message},t.fromMessage=function(e,r){return new t(null,r,e)},t.INVALID_EXPRESSION_ERR=51,t.TYPE_ERR=52,t}();H.prototype={},H.prototype.constructor=H,H.superclass=Object.prototype,H.prototype.evaluate=function(e,t,r){this.context.expressionContextNode=e;var n=this.xpath.evaluate(this.context);return new X(n,t)},F.prototype={},F.prototype.constructor=F,F.superclass=Object.prototype,F.prototype.getNamespace=function(e,t){return null==this.xpathNSResolver?null:this.xpathNSResolver.lookupNamespaceURI(e)},W.prototype={},W.prototype.constructor=W,W.superclass=Object.prototype,W.prototype.lookupNamespaceURI=function(e){return this.namespaceResolver.getNamespace(e,this.node)},X.prototype={},X.prototype.constructor=X,X.superclass=Object.prototype,X.prototype.iterateNext=function(){if(this.resultType!=X.UNORDERED_NODE_ITERATOR_TYPE&&this.resultType!=X.ORDERED_NODE_ITERATOR_TYPE)throw new Y(Y.TYPE_ERR);return this.nodes[this.iteratorIndex++]},X.prototype.snapshotItem=function(e){if(this.resultType!=X.UNORDERED_NODE_SNAPSHOT_TYPE&&this.resultType!=X.ORDERED_NODE_SNAPSHOT_TYPE)throw new Y(Y.TYPE_ERR);return this.nodes[e]},X.ANY_TYPE=0,X.NUMBER_TYPE=1,X.STRING_TYPE=2,X.BOOLEAN_TYPE=3,X.UNORDERED_NODE_ITERATOR_TYPE=4,X.ORDERED_NODE_ITERATOR_TYPE=5,X.UNORDERED_NODE_SNAPSHOT_TYPE=6,X.ORDERED_NODE_SNAPSHOT_TYPE=7,X.ANY_UNORDERED_NODE_TYPE=8,X.FIRST_ORDERED_NODE_TYPE=9;try{var k=!0;try{document.implementation&&document.implementation.hasFeature&&document.implementation.hasFeature("XPath",null)&&(k=!1)}catch(e){}k&&K(document,new t)}catch(e){}K(e,new t),function(){function r(e){return{getNamespace:function(t,r){var n=e(t,r);return n||E.getNamespace(t,r)}}}function n(e){return r(e.getNamespace.bind(e))}function o(e){return r(function(t){return e[t]})}function i(e){return e&&"function"==typeof e.getNamespace?n(e):"function"==typeof e?r(e):"object"==typeof e?o(e):E}function s(e){if(null===e||"undefined"==typeof e||e instanceof I||e instanceof L||e instanceof C||e instanceof O)return e;switch(typeof e){case"string":return new I(e);case"boolean":return new L(e);case"number":return new C(e)}var t=new O;return t.addArray([].concat(e)),t}function a(e){return function(t){var r=Array.prototype.slice.call(arguments,1).map(function(e){return e.evaluate(t)}),n=e.apply(this,[].concat(t,r));return s(n)}}function u(e){return{getFunction:function(t,r){var n=e(t,r);return n?a(n):v.getFunction(t,r)}}}function c(e){return u(e.getFunction.bind(e))}function l(e){return u(function(t){return e[t]})}function p(e){return e&&"function"==typeof e.getFunction?c(e):"function"==typeof e?u(e):"object"==typeof e?l(e):v}function h(e){return{getVariable:function(t,r){var n=e(t,r);return s(n)}}}function f(e){if(e){if("function"==typeof e.getVariable)return h(e.getVariable.bind(e));if("function"==typeof e)return h(e);if("object"==typeof e)return h(function(t){return e[t]})}return A}function m(e){var t=new _;return e?(t.namespaceResolver=i(e.namespaces),t.functionResolver=p(e.functions),t.variableResolver=f(e.variables),t.expressionContextNode=e.node):t.namespaceResolver=E,t}function d(e,t){var r=m(t);return e.evaluate(r)}function g(e){var t=y.parse(e);return Object.create(w,{expression:{value:t}})}var y=new t,E=new B,v=new V,A=new P,w={evaluate:function(e){return d(this.expression,e)},evaluateNumber:function(e){return this.evaluate(e).numberValue()},evaluateString:function(e){return this.evaluate(e).stringValue()},evaluateBoolean:function(e){return this.evaluate(e).booleanValue()},evaluateNodeSet:function(e){return this.evaluate(e).nodeset()},select:function(e){return this.evaluateNodeSet(e).toArray()},select1:function(e){return this.select(e)[0]}};e.parse=g}(),e.XPath=r,e.XPathParser=t,e.XPathResult=X,e.Step=b,e.NodeTest=T,e.BarOperation=A,e.NamespaceResolver=B,e.FunctionResolver=V,e.VariableResolver=P,e.Utilities=G,e.XPathContext=_,e.XNodeSet=O,e.XBoolean=L,e.XString=I,e.XNumber=C,e.select=function(t,r,n){return e.selectWithResolver(t,r,null,n)},e.useNamespaces=function(t){var r={mappings:t||{},lookupNamespaceURI:function(e){return this.mappings[e]}};return function(t,n,o){return e.selectWithResolver(t,n,r,o)}},e.selectWithResolver=function(e,r,n,o){var i=new H(e,n,new t),s=X.ANY_TYPE,a=i.evaluate(r,s,null);return a.resultType==X.STRING_TYPE?a=a.stringValue:a.resultType==X.NUMBER_TYPE?a=a.numberValue:a.resultType==X.BOOLEAN_TYPE?a=a.booleanValue:(a=a.nodes,o&&(a=a[0])),a},e.select1=function(t,r){return e.select(t,r,!0)}}(xpath),function e(t,r,n){function o(s,a){if(!r[s]){if(!t[s]){var u="function"==typeof require&&require;if(!a&&u)return u(s,!0);if(i)return i(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var l=r[s]={exports:{}};t[s][0].call(l.exports,function(e){var r=t[s][1][e];return o(r?r:e)},l,l.exports,e,t,r,n)}return r[s].exports}for(var i="function"==typeof require&&require,s=0;s<n.length;s++)o(n[s]);return o}({1:[function(e,t,r){var n=e("./lib/algorithm/exclusive-canonicalisation"),o={algorithms:{"http://www.w3.org/2001/10/xml-exc-c14n#":function(e){return new n(e)},"http://www.w3.org/2001/10/xml-exc-c14n#WithComments":function(e){return e=Object.create(e||null),e.includeComments=!0,new n(e)}}},i=t.exports=function e(){return this instanceof e?void(this.algorithms=Object.create(o.algorithms)):new e};i.prototype.registerAlgorithm=function(e,t){return this.algorithms[e]=t,this},i.prototype.getAlgorithm=function(e){return this.algorithms[e]},i.prototype.createCanonicaliser=function(e,t){return this.algorithms[e](t)}},{"./lib/algorithm/exclusive-canonicalisation":3}],2:[function(e,t,r){var n=t.exports=function(e){};n.prototype.name=function(){return null},n.prototype.canonicalise=function(e,t){setImmediate(function(){return t(Error("not implemented"))})}},{}],3:[function(e,t,r){var n=e("../escape"),o=e("../algorithm"),i=t.exports=function(e){o.call(this,e),e=e||{},this.includeComments=!!e.includeComments,this.inclusiveNamespaces=e.inclusiveNamespaces||[]};i.prototype=Object.create(o.prototype,{constructor:{value:i}}),i.prototype.name=function(){return"http://www.w3.org/2001/10/xml-exc-c14n#"+(this.includeComments?"WithComments":"")},i.prototype.canonicalise=function(e,t){var r=this;setImmediate(function(){try{var n=r._processInner(e)}catch(e){return t(e)}return t(null,n)})},i.prototype.getIncludeComments=function(){return!!this.includeComments},i.prototype.setIncludeComments=function(e){this.includeComments=!!e},i.prototype.getInclusiveNamespaces=function(){return this.inclusiveNamespaces.slice()},i.prototype.setInclusiveNamespaces=function(e){return this.inclusiveNamespaces=e.slice(),this},i.prototype.addInclusiveNamespace=function(e){return this.inclusiveNamespaces.push(e),this};var s=function(e,t){return!e.prefix&&t.prefix?-1:!t.prefix&&e.prefix?1:e.name.localeCompare(t.name)},a=function(e,t){var r=e.prefix+e.namespaceURI,n=t.prefix+t.namespaceURI;return r===n?0:r.localeCompare(n)};i.prototype._renderAttributes=function(e){return(e.attributes?[].slice.call(e.attributes):[]).filter(function(e){return 0!==e.name.indexOf("xmlns")}).sort(s).map(function(e){return" "+e.name+'="'+n.attributeEntities(e.value)+'"'}).join("")},i.prototype._renderNamespace=function(e,t,r){var o="",i=r,s=t.slice(),u=[],c=e.namespaceURI||"";if(e.prefix){var l=s.filter(function(t){return t.prefix===e.prefix}).shift();if(l&&l.namespaceURI!==e.namespaceURI){for(var p=0;p<s.length;++p)s[p].prefix===e.prefix&&s.splice(p--,1);l=null}l||(u.push({prefix:e.prefix,namespaceURI:e.namespaceURI}),s.push({prefix:e.prefix,namespaceURI:e.namespaceURI}))}else r!==c&&(i=c,o+=' xmlns="'+n.attributeEntities(i)+'"');if(e.attributes)for(var p=0;p<e.attributes.length;p++){var h=e.attributes[p],l=null;if(h.prefix&&"xmlns"!==h.prefix&&(l=s.filter(function(e){return e.prefix===h.prefix}).shift(),l&&l.namespaceURI!==h.namespaceURI)){for(var p=0;p<s.length;++p)s[p].prefix===h.prefix&&s.splice(p--,1);l=null}h.prefix&&!l&&"xmlns"!==h.prefix?(u.push({prefix:h.prefix,namespaceURI:h.namespaceURI}),s.push({prefix:h.prefix,namespaceURI:h.namespaceURI})):h.prefix&&"xmlns"===h.prefix&&this.inclusiveNamespaces.indexOf(h.localName)!==-1&&u.push({prefix:h.localName,namespaceURI:h.nodeValue})}u.sort(a);for(var p=0;p<u.length;++p)o+=" xmlns:"+u[p].prefix+'="'+n.attributeEntities(u[p].namespaceURI)+'"';return{rendered:o,newDefaultNamespace:i,newPrefixesInScope:s}},i.prototype._renderComment=function(e){var t=e.ownerDocument===e.parentNode,r=null,o=null;if(t){for(var i=e,s=e;null!==i;){if(i===e.ownerDocument.documentElement){r=!0;break}i=i.nextSibling}for(;null!==s;){if(s===e.ownerDocument.documentElement){o=!0;break}s=s.previousSibling}}return(o?"\n":"")+"<!--"+n.textEntities(e.data)+"-->"+(r?"\n":"")},i.prototype._renderProcessingInstruction=function(e){if("xml"===e.tagName)return"";var t=e.ownerDocument===e.parentNode,r=null,o=null;if(t){for(var i=e,s=e;null!==i;){if(i===e.ownerDocument.documentElement){r=!0;break}i=i.nextSibling}for(;null!==s;){if(s===e.ownerDocument.documentElement){o=!0;break}s=s.previousSibling}}return(o?"\n":"")+"<?"+e.tagName+(e.data?" "+n.textEntities(e.data):"")+"?>"+(r?"\n":"")},i.prototype._processInner=function(e,t,r){if(r=r||"",t=t||[],3===e.nodeType)return e.ownerDocument===e.parentNode?n.textEntities(e.data.trim()):n.textEntities(e.data);if(7===e.nodeType)return this._renderProcessingInstruction(e);if(8===e.nodeType)return this.includeComments?this._renderComment(e):"";if(10===e.nodeType)return"";var o=this._renderNamespace(e,t,r),i=this;return[e.tagName?"<"+e.tagName+o.rendered+this._renderAttributes(e)+">":"",[].slice.call(e.childNodes).map(function(e){return i._processInner(e,o.newPrefixesInScope,o.newDefaultNamespace)}).join(""),e.tagName?"</"+e.tagName+">":""].join("")}},{"../algorithm":2,"../escape":4}],4:[function(e,t,r){var n=r.entities={"&":"&amp;",'"':"&quot;","<":"&lt;",">":"&gt;","\t":"&#x9;","\n":"&#xA;","\r":"&#xD;"};r.attributeEntities=function(e){return e.replace(/([\&<"\t\n\r])/g,function(e){return n[e]})},r.textEntities=function(e){return e.replace(/([\&<>\r])/g,function(e){return n[e]})}},{}]},{},[1]),function(){window.Helper=function(){function e(){}return e.base64ToArrayBuffer=function(e){var t,r,n,o,i,s;for(t=window.atob(e),i=t.length,r=new Uint8Array(i),n=o=0,s=i-1;0<=s?o<=s:o>=s;n=0<=s?++o:--o)r[n]=t.charCodeAt(n);return r.buffer},e.base64ToBase64URL=function(e){return e=e.split("=").toString(),e=e.split("+").join("-").toString(),e=e.split("/").join("_").toString(),e=e.split(",").join("").toString(),e=e.trim()},e.arrayBufferToBase64=function(e){var t,r,n,o,i,s,a,u,c,l,p,h,f;return l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=new Uint8Array(e),o=s.byteLength,i=o%3,f=o-i,p=function(e){var t,r,n,o,i;return o=s[e]<<16|s[e+1]<<8|s[e+2],t=(16515072&o)>>18,r=(258048&o)>>12,n=(4032&o)>>6,i=63&o,l[t]+l[r]+l[n]+l[i]},c=function(){var e,t,r;for(r=[],h=e=0,t=f;e<t;h=e+=3)r.push(p(h));return r}(),n=c.join(""),1===i?(u=s[f],t=(252&u)>>2,r=(3&u)<<4,n+=l[t]+l[r]+"=="):2===i&&(u=s[f]<<8|s[f+1],t=(64512&u)>>10,r=(1008&u)>>4,a=(15&u)<<2,n+=l[t]+l[r]+l[a]+"="),n},e.concatArrayBuffers=function(e,t){var r;return r=new Uint8Array(e.byteLength+t.byteLength),r.set(new Uint8Array(e),0),r.set(new Uint8Array(t),e.byteLength),r.buffer},e.generateGUID=function(){var t;return t=window.crypto.getRandomValues(new Uint8Array(32)),t=e.arrayBufferToBase64(t),t=e.base64ToBase64URL(t)},e.mapFromURI=function(t){var r,n;return t=t.toLowerCase(),t=t.toLowerCase(),t=btoa(t),t=e.base64ToBase64URL(t),r=XMLSecEnum.URIMapper[t],n=XMLSecEnum.WebCryptoAlgMapper[r],n?n:r},e.base64URLtoBase64=function(e){return e=e.split("-").join("+").toString(),e=e.split("_").join("/").toString(),e.length%4===1&&(e+="="),e.length%4===2&&(e+="=="),e},e.ensureHasId=function(t){var r,n,o,i,s;for(r="",9===t.nodeType&&(t=t.documentElement),n=i=0,s=XMLSecEnum.idAttributes.length-1;(0<=s?i<=s:i>=s)&&!(r=utils.findAttr(t,XMLSecEnum.idAttributes[n]));n=0<=s?++i:--i);return r?r.value:(o=e.generateGUID(),t.setAttribute("ID",o),o)},e}()}.call(this),function(){window.utils=function(){function e(){}return e.findAttr=function(e,t,r){var n,o,i,s;for(s=e.attributes,o=0,i=s.length;o<i;o++)if(n=s[o],this.attrEqualsExplicitly(n,t,r)||this.attrEqualsImplicitly(n,t,r,e))return n;return null},e.findFirst=function(e,t){var r;if(r=xpath.select(t,e),0===r.length)throw"could not find xpath "+t;return r[0]},e.findChilds=function(e,t,r){var n,o,i,s,a;for(e=e.documentElement||e,a=[],s=e.childNodes,o=0,i=s.length;o<i;o++)n=s[o],n.localName!==t||n.namespaceURI!==r&&r||a.push(n);return a},e.attrEqualsExplicitly=function(e,t,r){return e.localName===t&&(e.namespaceURI===r||!r)},e.attrEqualsImplicitly=function(e,t,r,n){return e.localName===t&&(!e.namespaceURI&&n.namespaceURI===r||!r)},e}()}.call(this),function(){window.Algorithms=function(){function e(){}return e.EncryptionAlgorithms={AES:{CBC:{128:"AESCBC128",192:"AESCBC192",256:"AESCBC256"},GCM:{128:"AESGCM128",192:"AESGCM192",256:"AESGCM256"}},RSA:{OAEP:"RSAOAEP"}},e.SigningAlgorithms={RSA:{SHA1:"RSASHA1"},HMAC:{SHA1:"HMACSHA1"}},e.DigestAlgorithms={SHA1:"SHA1"},e.TransformAlgorithms={C14N:"c14n",Enveloped_Signature:"envSig"},e}()}.call(this),function e(t,r,n){function o(s,a){if(!r[s]){if(!t[s]){var u="function"==typeof require&&require;if(!a&&u)return u(s,!0);if(i)return i(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var l=r[s]={exports:{}};t[s][0].call(l.exports,function(e){var r=t[s][1][e];return o(r?r:e)},l,l.exports,e,t,r,n)}return r[s].exports}for(var i="function"==typeof require&&require,s=0;s<n.length;s++)o(n[s]);return o}({1:[function(e,t,r){(function(){var t;window.setImmediate=e("timers").setImmediate,t=e("xml-c14n")(),window.CanonicalXML=function(){function e(e){this.can=t.createCanonicaliser(this.CanonicalisationMethod)}return e.prototype.CanonicalisationMethod="http://www.w3.org/2001/10/xml-exc-c14n#WithComments",e.prototype.canonicalise=function(e){var t;return t=this.can,new Promise(function(r,n){return t.canonicalise(e,function(e,t){return e?n(e):r(t)})})},e}()}).call(this)},{timers:3,"xml-c14n":4}],2:[function(e,t,r){function n(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function i(e){if(p===setTimeout)return setTimeout(e,0);if((p===n||!p)&&setTimeout)return p=setTimeout,setTimeout(e,0);try{return p(e,0)}catch(t){try{return p.call(null,e,0)}catch(t){return p.call(this,e,0)}}}function s(e){if(h===clearTimeout)return clearTimeout(e);if((h===o||!h)&&clearTimeout)return h=clearTimeout,clearTimeout(e);try{return h(e)}catch(t){try{return h.call(null,e)}catch(t){return h.call(this,e)}}}function a(){g&&m&&(g=!1,m.length?d=m.concat(d):y=-1,d.length&&u())}function u(){if(!g){var e=i(a);g=!0;for(var t=d.length;t;){for(m=d,d=[];++y<t;)m&&m[y].run();y=-1,t=d.length}m=null,g=!1,s(e)}}function c(e,t){this.fun=e,this.array=t}function l(){}var p,h,f=t.exports={};!function(){try{p="function"==typeof setTimeout?setTimeout:n}catch(e){p=n}try{h="function"==typeof clearTimeout?clearTimeout:o}catch(e){h=o}}();var m,d=[],g=!1,y=-1;f.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];d.push(new c(e,t)),1!==d.length||g||i(u)},c.prototype.run=function(){this.fun.apply(null,this.array)},f.title="browser",f.browser=!0,f.env={},f.argv=[],f.version="",f.versions={},f.on=l,f.addListener=l,f.once=l,f.off=l,f.removeListener=l,f.removeAllListeners=l,f.emit=l,f.binding=function(e){throw new Error("process.binding is not supported")},f.cwd=function(){return"/"},f.chdir=function(e){throw new Error("process.chdir is not supported")},f.umask=function(){return 0}},{}],3:[function(e,t,r){function n(e,t){this._id=e,this._clearFn=t}var o=e("process/browser.js").nextTick,i=Function.prototype.apply,s=Array.prototype.slice,a={},u=0;r.setTimeout=function(){return new n(i.call(setTimeout,window,arguments),clearTimeout)},r.setInterval=function(){return new n(i.call(setInterval,window,arguments),clearInterval)},r.clearTimeout=r.clearInterval=function(e){e.close()},n.prototype.unref=n.prototype.ref=function(){},n.prototype.close=function(){this._clearFn.call(window,this._id)},r.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},r.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},r._unrefActive=r.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},r.setImmediate="function"==typeof setImmediate?setImmediate:function(e){var t=u++,n=!(arguments.length<2)&&s.call(arguments,1);return a[t]=!0,o(function(){a[t]&&(n?e.apply(null,n):e.call(null),r.clearImmediate(t))}),t},r.clearImmediate="function"==typeof clearImmediate?clearImmediate:function(e){delete a[e]}},{"process/browser.js":2}],4:[function(e,t,r){var n=e("./lib/algorithm/exclusive-canonicalisation"),o={algorithms:{"http://www.w3.org/2001/10/xml-exc-c14n#":function(e){return new n(e)},"http://www.w3.org/2001/10/xml-exc-c14n#WithComments":function(e){return e=Object.create(e||null),e.includeComments=!0,new n(e)}}},i=t.exports=function e(){return this instanceof e?void(this.algorithms=Object.create(o.algorithms)):new e};i.prototype.registerAlgorithm=function(e,t){return this.algorithms[e]=t,this},i.prototype.getAlgorithm=function(e){return this.algorithms[e]},i.prototype.createCanonicaliser=function(e,t){return this.algorithms[e](t)}},{"./lib/algorithm/exclusive-canonicalisation":6}],5:[function(e,t,r){var n=t.exports=function(e){};n.prototype.name=function(){return null},n.prototype.canonicalise=function(e,t){setImmediate(function(){return t(Error("not implemented"))})}},{}],6:[function(e,t,r){var n=e("../escape"),o=e("../algorithm"),i=t.exports=function(e){o.call(this,e),e=e||{},this.includeComments=!!e.includeComments,this.inclusiveNamespaces=e.inclusiveNamespaces||[]};i.prototype=Object.create(o.prototype,{constructor:{value:i}}),i.prototype.name=function(){return"http://www.w3.org/2001/10/xml-exc-c14n#"+(this.includeComments?"WithComments":"")},i.prototype.canonicalise=function(e,t){var r=this;setImmediate(function(){try{var n=r._processInner(e)}catch(e){return t(e)}return t(null,n)})},i.prototype.getIncludeComments=function(){return!!this.includeComments},i.prototype.setIncludeComments=function(e){this.includeComments=!!e},i.prototype.getInclusiveNamespaces=function(){return this.inclusiveNamespaces.slice()},i.prototype.setInclusiveNamespaces=function(e){return this.inclusiveNamespaces=e.slice(),this},i.prototype.addInclusiveNamespace=function(e){return this.inclusiveNamespaces.push(e),this};var s=function(e,t){return!e.prefix&&t.prefix?-1:!t.prefix&&e.prefix?1:e.name.localeCompare(t.name)},a=function(e,t){var r=e.prefix+e.namespaceURI,n=t.prefix+t.namespaceURI;return r===n?0:r.localeCompare(n)};i.prototype._renderAttributes=function(e){return(e.attributes?[].slice.call(e.attributes):[]).filter(function(e){return 0!==e.name.indexOf("xmlns")}).sort(s).map(function(e){return" "+e.name+'="'+n.attributeEntities(e.value)+'"'}).join("")},i.prototype._renderNamespace=function(e,t,r){var o="",i=r,s=t.slice(),u=[],c=e.namespaceURI||"";if(e.prefix){var l=s.filter(function(t){return t.prefix===e.prefix}).shift();if(l&&l.namespaceURI!==e.namespaceURI){for(var p=0;p<s.length;++p)s[p].prefix===e.prefix&&s.splice(p--,1);l=null}l||(u.push({prefix:e.prefix,namespaceURI:e.namespaceURI}),s.push({prefix:e.prefix,namespaceURI:e.namespaceURI}))}else r!==c&&(i=c,o+=' xmlns="'+n.attributeEntities(i)+'"');if(e.attributes)for(var p=0;p<e.attributes.length;p++){var h=e.attributes[p],l=null;if(h.prefix&&"xmlns"!==h.prefix&&(l=s.filter(function(e){return e.prefix===h.prefix}).shift(),l&&l.namespaceURI!==h.namespaceURI)){for(var p=0;p<s.length;++p)s[p].prefix===h.prefix&&s.splice(p--,1);l=null}h.prefix&&!l&&"xmlns"!==h.prefix?(u.push({prefix:h.prefix,namespaceURI:h.namespaceURI}),s.push({prefix:h.prefix,namespaceURI:h.namespaceURI})):h.prefix&&"xmlns"===h.prefix&&this.inclusiveNamespaces.indexOf(h.localName)!==-1&&u.push({prefix:h.localName,namespaceURI:h.nodeValue})}u.sort(a);for(var p=0;p<u.length;++p)o+=" xmlns:"+u[p].prefix+'="'+n.attributeEntities(u[p].namespaceURI)+'"';return{rendered:o,newDefaultNamespace:i,newPrefixesInScope:s}},i.prototype._renderComment=function(e){var t=e.ownerDocument===e.parentNode,r=null,o=null;if(t){for(var i=e,s=e;null!==i;){if(i===e.ownerDocument.documentElement){r=!0;break}i=i.nextSibling}for(;null!==s;){if(s===e.ownerDocument.documentElement){o=!0;break}s=s.previousSibling}}return(o?"\n":"")+"<!--"+n.textEntities(e.data)+"-->"+(r?"\n":"")},i.prototype._renderProcessingInstruction=function(e){if("xml"===e.tagName)return"";var t=e.ownerDocument===e.parentNode,r=null,o=null;if(t){for(var i=e,s=e;null!==i;){if(i===e.ownerDocument.documentElement){r=!0;break}i=i.nextSibling}for(;null!==s;){if(s===e.ownerDocument.documentElement){o=!0;break}s=s.previousSibling}}return(o?"\n":"")+"<?"+e.tagName+(e.data?" "+n.textEntities(e.data):"")+"?>"+(r?"\n":"")},i.prototype._processInner=function(e,t,r){if(r=r||"",t=t||[],3===e.nodeType)return e.ownerDocument===e.parentNode?n.textEntities(e.data.trim()):n.textEntities(e.data);if(7===e.nodeType)return this._renderProcessingInstruction(e);if(8===e.nodeType)return this.includeComments?this._renderComment(e):"";if(10===e.nodeType)return"";var o=this._renderNamespace(e,t,r),i=this;return[e.tagName?"<"+e.tagName+o.rendered+this._renderAttributes(e)+">":"",[].slice.call(e.childNodes).map(function(e){return i._processInner(e,o.newPrefixesInScope,o.newDefaultNamespace)}).join(""),e.tagName?"</"+e.tagName+">":""].join("")}},{"../algorithm":5,"../escape":7}],7:[function(e,t,r){var n=r.entities={"&":"&amp;",'"':"&quot;","<":"&lt;",">":"&gt;","\t":"&#x9;","\n":"&#xA;","\r":"&#xD;"};r.attributeEntities=function(e){return e.replace(/([\&<"\t\n\r])/g,function(e){return n[e]})},r.textEntities=function(e){return e.replace(/([\&<>\r])/g,function(e){return n[e]})}},{}]},{},[1]),function(){window.CryptoWrapper=function(){function e(){}return e.Sign=function(e,t){var r;return r=new TextEncoder("utf-8").encode(e),window.crypto.subtle.sign({name:t.signAlg.name,hash:{name:t.hash}},t.privateKey,r).then(function(e){return Helper.arrayBufferToBase64(e)})},e.Verify=function(e,t,r){var n,o;return n=new TextEncoder("utf-8").encode(e),o=Helper.base64ToArrayBuffer(r.signatureValue),window.crypto.subtle.verify({name:r.signAlg.name,hash:{name:r.signAlg.name}},t,o,n).then(function(e){return e})},e.WrapKey=function(e,t){return window.crypto.subtle.wrapKey("raw",e,t,{name:t.algorithm.name,hash:{name:t.algorithm.hash.name}}).then(function(e){return Helper.arrayBufferToBase64(e)}).then(null,function(e){return console.error(e)})},e.UnWrapKey=function(e,t,r){return e=Helper.base64ToArrayBuffer(e),window.crypto.subtle.unwrapKey("raw",e,t,{name:t.algorithm.name,hash:{name:t.algorithm.hash.name}},{name:r},!1,["encrypt","decrypt"]).then(function(e){return e}).then(null,function(e){return console.error(e)})},e.Encryption=function(e,t,r){var n,o,i,s;return i=t.algorithm.name,s=e.nodeType,e=(new XMLSerializer).serializeToString(e),o=new TextEncoder("utf-8").encode(e),n="AES-GCM"===i?window.crypto.getRandomValues(new Uint8Array(12)):window.crypto.getRandomValues(new Uint8Array(16)),r&&(n=n.fill(0)),window.crypto.subtle.encrypt({name:i,iv:n},t,o).then(function(e){var t;return e=Helper.concatArrayBuffers(n,e),t=[Helper.arrayBufferToBase64(e),s]})},e.AES_ModifyPadding=function(e,t){var r,n,o,i;return o="",n=t.algorithm.name,r=e.slice(e.byteLength-16,e.byteLength),i=new Uint8Array(16),i.fill(16),window.crypto.subtle.encrypt({name:n,iv:r},t,i).then(function(t){return Helper.concatArrayBuffers(e,t)})},e.Decryption=function(e,t){var r,n,o;return o=t.algorithm.name,n=Helper.base64ToArrayBuffer(e),"AES-GCM"===o?(r=n.slice(0,12),n=n.slice(12,n.byteLength)):(r=n.slice(0,16),n=n.slice(16,n.byteLength)),r=new Uint8Array(r),"AES-CBC"===o?this.AES_ModifyPadding(n,t).then(function(e){return window.crypto.subtle.decrypt({name:o,iv:r},t,e).then(function(e){var t,r;return e=e.slice(0,e.byteLength-16),t=new Uint8Array(e),r=t[t.length-1],r<=16&&(e=e.slice(0,e.byteLength-r)),e=String.fromCharCode.apply(null,new Uint8Array(e))}).then(null,function(e){return console.error(e)})}):window.crypto.subtle.decrypt({name:o,iv:r},t,n).then(function(e){return String.fromCharCode.apply(null,new Uint8Array(e))}).then(null,function(e){return console.error(e)})},e.hash=function(e,t){var r;return r=new TextEncoder("utf-8").encode(e),crypto.subtle.digest(t,r).then(function(e){return Helper.arrayBufferToBase64(e)}).then(null,function(e){return e})},e}()}.call(this),function(){window.ElementBuilder=function(){function e(){}return e.buildWrappingElement=function(){var e,t;return e=document.implementation.createDocumentType("Document","Document","<!ENTITY Document 'Document'>"),t=document.implementation.createDocument("","Document",e)},e.buildRSAKeyInfoElement=function(e,t,r){var n,o,i,s,a,u,c,l,p;return o=document.implementation.createDocumentType("dummy","dummy","<!ENTITY dummy 'dummy'>"),p=document.implementation.createDocument("","keyInfo",o),a=p.createElement(e+"KeyInfo"),u=p.createElement(e+"KeyValue"),
n=p.createElement(e+"RSAKeyValue"),c=p.createElement(e+"Modulus"),l=p.createTextNode(t),c.appendChild(l),i=p.createElement(e+"Exponent"),s=p.createTextNode(r),i.appendChild(s),n.appendChild(c),n.appendChild(i),u.appendChild(n),a.appendChild(u),p.documentElement.appendChild(a)},e.buildSignatureElement=function(e,t,r){var n,o,i,s,a,u;return u=e.replace(":",""),""!==e&&(u=":"+u),n=document.implementation.createDocumentType("dummy","dummy","<!ENTITY dummy 'dummy'>"),a=document.implementation.createDocument("","signature",n),o=a.createElement(e+"Signature"),o.setAttribute("xmlns"+u,XMLSecEnum.namespaceURIs.xmlSig),o.appendChild(t),i=a.createElement(e+"SignatureValue"),s=a.createTextNode(r),i.appendChild(s),o.appendChild(i),a.documentElement.appendChild(o)},e.buildSignedInfoElement=function(e,t){var r,n,o,i,s,a,u,c,l,p;for(s=e.prefix,p=s.replace(":",""),n=document.implementation.createDocumentType("dummy","dummy","<!ENTITY dummy 'dummy'>"),l=document.implementation.createDocument("","signedInfo",n),c=l.createElementNS(XMLSecEnum.namespaceURIs.xmlSig,s+"SignedInfo"),r=l.createElement(s+"CanonicalizationMethod"),r.setAttribute("Algorithm",e.canonicalisationAlgURI),c.appendChild(r),u=l.createElement(s+"SignatureMethod"),u.setAttribute("Algorithm",e.signAlgURI),c.appendChild(u),o=i=0,a=t.length-1;0<=a?i<=a:i>=a;o=0<=a?++i:--i)c.appendChild(t[o]);return l.documentElement.appendChild(c)},e.buildReferenceElement=function(e,t,r,n,o){var i,s,a,u,c,l,p,h,f,m,d;for(u=document.implementation.createDocumentType("dummy","dummy","<!ENTITY dummy 'dummy'>"),d=document.implementation.createDocument("","reference",u),h=d.createElement(t+"Reference"),h.setAttribute("URI","#"+e),m=d.createElement(t+"Transforms"),h.appendChild(m),c=l=0,p=r.length-1;0<=p?l<=p:l>=p;c=0<=p?++l:--l)f=d.createElement(t+"Transform"),f.setAttribute("Algorithm",r[c]),m.appendChild(f);return i=d.createElement(t+"DigestMethod"),i.setAttribute("Algorithm",n),h.appendChild(i),s=d.createElement(t+"DigestValue"),a=d.createTextNode(o),s.appendChild(a),h.appendChild(s),d.documentElement.appendChild(h)},e.buildEncryptedDataElement=function(e,t,r,n,o){var i,s,a,u,c,l,p,h,f,m,d,g,y,E,v;return g=r.prefix,g?(i=":"+g.replace(":",""),v=":"+r.keyInfoPrefix.replace(":","")):(g="",i=""),l=document.implementation.createDocumentType("dummy","dummy","<!ENTITY dummy 'dummy'>"),E=document.implementation.createDocument("","EncData",l),p=E.createElement(g+"EncryptedData"),o&&p.setAttribute("id",o),p.setAttribute("Type",e),p.setAttribute("xmlns"+i,XMLSecEnum.namespaceURIs.xmlEnc),h=E.createElement(g+"EncryptionMethod"),h.setAttribute("Algorithm",r.algIdentifer),p.appendChild(h),n&&(f=E.createElement(r.keyInfoPrefix+"KeyInfo"),f.setAttribute("xmlns"+v,XMLSecEnum.namespaceURIs.xmlSig),m=E.createElement(r.keyInfoPrefix+"KeyName"),d=E.createTextNode(r.asymKeyName),m.appendChild(d),f.appendChild(m),f.appendChild(n),p.appendChild(f)),s=E.createElement(g+"CipherData"),a=E.createElement(g+"CipherValue"),u=E.createTextNode(t),a.appendChild(u),s.appendChild(a),p.appendChild(s),E.documentElement.appendChild(p),y=new XMLSerializer,c=y.serializeToString(E.documentElement.appendChild(p))},e.buildEncryptedKeyElement=function(e,t){var r,n,o,i,s,a,u,c,l,p,h,f,m;return h=e.keyInfoPrefix,h?m=":"+h.replace(":",""):(h="",r=""),s=document.implementation.createDocumentType("dummy","dummy","<!ENTITY dummy 'dummy'>"),f=document.implementation.createDocument("","EncData",s),a=f.createElement(h+"EncryptedKey"),u=f.createElement(h+"EncryptionMethod"),u.setAttribute("Algorithm",e.asymAlgIdentifier),a.appendChild(u),c=f.createElement(h+"KeyInfo"),c.setAttribute("xmlns"+m,XMLSecEnum.namespaceURIs.xmlSig),l=f.createElement(h+"KeyName"),p=f.createTextNode(e.asymKeyName),l.appendChild(p),c.appendChild(l),a.appendChild(c),n=f.createElement(h+"CipherData"),o=f.createElement(h+"CipherValue"),i=f.createTextNode(t),o.appendChild(i),a.appendChild(o),f.documentElement.appendChild(a)},e}()}.call(this),function(){window.EncryptedXML=function(){function e(){}var t,r,n;return e.prototype.encrypt=function(e,r){var n,o,i,s,a,u,c,l,p,h;for(n=[],l=[],c=[],i=a=0,p=r.references.length-1;0<=p?a<=p:a>=p;i=0<=p?++a:--a){if(l[i]=xpath.select(r.references[i].xpath,e),0===l[i].length)throw new Error("Node not found or invalid xPath:"+references[i].xpath);for(s=u=0,h=l[i].length-1;0<=h?u<=h:u>=h;s=0<=h?++u:--u)c.push(l[i][s])}return Promise.all(function(){var e,i,s;for(s=[],o=e=0,i=c.length-1;0<=i?e<=i:e>=i;o=0<=i?++e:--e)s.push(CryptoWrapper.Encryption(c[o],r.symKey,r.staticIV).then(function(e){var o,i;return r.withKeyInfo?(i="Id_"+r.asymKeyName+"_"+Helper.generateGUID(),o=t(e[0],e[1],r,i).then(function(e){return o=$.parseXML(e),n.push([o,r.keyName])})):(o=t(e[0],e[1],r,i),o=$.parseXML(o),n.push([o,""]))}));return s}()).then(function(){var t,r,o;for(t=r=0,o=n.length-1;0<=o?r<=o:r>=o;t=0<=o?++r:--r)c[t].parentNode.replaceChild(n[t][0].firstChild,c[t]);return e})},t=function(e,t,r,n){var o,i;return i=3===t?XMLSecEnum.namespaceURIs.xmlEnc+XMLSecEnum.Type.Content:XMLSecEnum.namespaceURIs.xmlEnc+XMLSecEnum.Type.Element,r.withKeyInfo?CryptoWrapper.WrapKey(r.symKey,r.asymKey).then(function(t){var o,s;return s=ElementBuilder.buildEncryptedKeyElement(r,t),o=ElementBuilder.buildEncryptedDataElement(i,e,r,s,n)}):o=ElementBuilder.buildEncryptedDataElement(i,e,r)},n=function(e,t){var r,n,o,i;return n=e.getElementsByTagName(XMLSecEnum.NodeNames.encMethod)[0].getAttribute(XMLSecEnum.AttributeNames.algorithm),r=Helper.mapFromURI(n),i=e.getElementsByTagName(XMLSecEnum.NodeNames.encKey)[0],o=i.getElementsByTagName(XMLSecEnum.NodeNames.cipherValue)[0].innerHTML,i.parentNode.removeChild(i),CryptoWrapper.UnWrapKey(o,t,r.toUpperCase()).then(function(e){return e})},r=function(e,t,o,i){var s,a;return a=Helper.mapFromURI(e[i].getAttribute(XMLSecEnum.AttributeNames.type)),t.type===XMLSecEnum.KeyTypes.Private?n(e[i],t).then(function(n){var s;return s=e[i].getElementsByTagName(XMLSecEnum.NodeNames.cipherValue)[0].innerHTML,CryptoWrapper.Decryption(s,n).then(function(n){if(o.push([n,a]),i<e.length-1)return r(e,t,o,i+1)})}):t.type===XMLSecEnum.KeyTypes.Secret?(s=e[i].getElementsByTagName(XMLSecEnum.NodeNames.cipherValue)[0].innerHTML,CryptoWrapper.Decryption(s,t).then(function(n){if(o.push([n,a]),i<e.length-1)return r(e,t,o,i+1)})):void 0},e.prototype.decrypt=function(e,t){var n,o;if(n=[],o=xpath.select(XMLSecEnum.xPathSelectors.EncryptedData,e),0===o.length)throw new Error("No encData found");return r(o,t,n,0).then(function(){var t,r,i,s;for(t=r=0,s=n.length-1;0<=s?r<=s:r>=s;t=0<=s?++r:--r)n[t][1]===XMLSecEnum.Type.Element?o[t].parentNode.replaceChild($.parseXML(n[t][0]).firstChild,o[t]):(i=o[t].parentNode,o[t].parentNode.removeChild(o[t].parentNode.firstChild),i.innerHTML=n[t][0]);return e})},e}()}.call(this),function(){window.EncryptionParams=function(){function e(){this.staticIV=!1}return e.symKey="",e.asymKey="",e.asymKeyName="",e.withKeyInfo="",e.staticIV=!1,e.prefix="",e.references="",e.algIdentifer="",e.asymAlgIdentifier="",e.keyLength="",e.keyInfoPrefix="",e.prototype.setSymmetricKey=function(e){if(e&&(this.symKey=e,this.algIdentifer=XMLSecEnum.AlgIdentifiers[e.algorithm.name.replace("-","")+e.algorithm.length],this.keyLength=e.algorithm.length,!this.algIdentifer||""===this.algIdentifer))throw new Error("Algorithm not supported:"+algIdentifer);return this.symKey},e.prototype.setPublicKey=function(e,t){if(e&&(this.asymKey=e,this.withKeyInfo=!0,this.asymKeyName=t,this.asymAlgIdentifier=XMLSecEnum.AlgIdentifiers[e.algorithm.name.replace("-","")],!this.asymAlgIdentifier||""===this.asymAlgIdentifier))throw new Error("Algorithm not supported:"+asymAlgIdentifier);return this.asymKey},e.prototype.setPrefix=function(e){if(""!==e)return e.indexOf(":")===-1?this.prefix=e+":":this.prefix=e},e.prototype.setKeyInfoPrefix=function(e){if(""!==e)return e.indexOf(":")===-1?this.keyInfoPrefix=e+":":this.keyInfoPrefix=e},e.prototype.setStaticIV=function(e){return this.staticIV=e},e.prototype.setReferences=function(e){return this.references=e},e.prototype.getEncryptionInfo=function(){var e;return e={symKey:this.symKey,keyLength:this.keyLength,asymKey:this.asymKey,asymKeyName:this.asymKeyName,withKeyInfo:this.withKeyInfo,staticIV:this.staticIV,prefix:this.prefix,references:this.references,algIdentifer:this.algIdentifer,asymAlgIdentifier:this.asymAlgIdentifier,keyInfoPrefix:this.keyInfoPrefix}},e}()}.call(this),function(){window.Reference=function(){function e(e,t,n,o,i){var s,a,u;if(this.xpath=e,this.transforms=t,this.digestAlg=n,this.uri=o,this.digestValue=i,"/*"===this.xpath||""===this.xpath?(this.xpath="/*",this.isEmptyUri=!0):this.isEmptyUri=!1,this.transforms){for(s=a=0,u=this.transforms.length-1;0<=u?a<=u:a>=u;s=0<=u?++a:--a)if(this.transforms[s].indexOf("http")>-1)this.transforms[s]=this.transforms[s];else{if(!XMLSecEnum.AlgIdentifiers[this.transforms[s]])throw new Error("Algorithm not Supported:"+this.transforms[s]);this.transforms[s]=XMLSecEnum.AlgIdentifiers[this.transforms[s]]}this.transforms=r(this.transforms)}this.digestAlg&&(this.digestAlg.indexOf("http")>-1?(this.digestAlgURI=this.digestAlg,this.digestAlg=Helper.mapFromURI(this.digestAlg)):XMLSecEnum.AlgIdentifiers[this.digestAlg.toUpperCase()]&&(this.digestAlgURI=XMLSecEnum.AlgIdentifiers[this.digestAlg.toUpperCase()],this.digestAlg=XMLSecEnum.WebCryptoAlgMapper[this.digestAlg.toUpperCase()])),new Error("Algorithm not Supported:"+this.digestAlg)}var t,r;return e.prototype.xpath="",e.prototype.transforms=[],e.prototype.digestAlg="",e.prototype.digestAlgURI="",e.prototype.uri="",e.prototype.digestValue="",e.prototype.isEmptyUri="",e.prototype.setEnvelopedSignatureTransform=function(){var e,r,n,o;if(e=!1,this.transforms)for(r=n=0,o=this.transforms.length-1;0<=o?n<=o:n>=o;r=0<=o?++n:--n)if(XMLSecEnum.AlgIdentifiers[this.transforms[r]]===XMLSecEnum.AlgIdentifiers.envSig||this.transforms[r]===XMLSecEnum.AlgIdentifiers.envSig){e=!0;break}return e===!1&&(this.transforms[this.transforms.length]=XMLSecEnum.AlgIdentifiers.envSig),this.transforms=t(this.transforms)},t=function(e){var t,r,n,o;for(o=[],o.push(XMLSecEnum.AlgIdentifiers.envSig),t=r=0,n=e.length-1;0<=n?r<=n:r>=n;t=0<=n?++r:--r)e[t]!==XMLSecEnum.AlgIdentifiers.envSig&&o.push(e[t]);return this.transforms=o},r=function(e){var t,r,n,o;for(o=[],t=r=0,n=e.length-1;0<=n?r<=n:r>=n;t=0<=n?++r:--r)e[t]!==XMLSecEnum.AlgIdentifiers.c14n&&o.push(e[t]);return o.push(XMLSecEnum.AlgIdentifiers.c14n),this.transforms=o},e}()}.call(this),function(){window.SignatureParams=function(){function e(){this.prefix=""}return e.signAlg="",e.signAlgURI="",e.references=[],e.publicKey="",e.privateKey="",e.prefix="",e.canonicalisationAlgURI="",e.canonicalisationAlg="",e.signatureValue="",e.signatureType="",e.prototype.setCanonicalisationAlg=function(e){if(this.canonicalisationAlgURI=XMLSecEnum.AlgIdentifiers[e],this.canonicalisationAlg=XMLSecEnum.WebCryptoAlgMapper[e],!this.canonicalisationAlg||""===this.canonicalisationAlg)throw new Error("Algorithm not supported:"+canonicalisationAlg)},e.prototype.setPrefix=function(e){if(""!==e)return e.indexOf(":")===-1?this.prefix=e+":":this.prefix=e},e.prototype.setSigAlg=function(e){if(this.signAlgURI=XMLSecEnum.AlgIdentifiers[e],this.signAlg=XMLSecEnum.WebCryptoAlgMapper[e],!this.signAlg||""===this.signAlg)throw new Error("Algorithm not supported:"+e)},e.prototype.setSigAlgFromURI=function(e){if(this.signAlgURI=e,this.signAlg=Helper.mapFromURI(e),!this.signAlg||""===this.signAlg)throw new Error("Algorithm not supported:"+e)},e.prototype.setCanonicalisationAlgFromURI=function(e){if(this.canonicalisationAlgURI=e,this.canonicalisationAlg=Helper.mapFromURI(e),!this.canonicalisationAlg||""===this.canonicalisationAlg)throw new Error("Algorithm not supported:"+e)},e.prototype.setReferences=function(e){var t,r,n,o;if(this.references=e,this.signatureType===XMLSecEnum.signatureTypesEnum.Enveloped&&e){for(o=[],t=r=0,n=this.references.length-1;0<=n?r<=n:r>=n;t=0<=n?++r:--r)o.push(this.references[t].setEnvelopedSignatureTransform());return o}},e.prototype.setKeyPair=function(e,t){if(this.publicKey=e,this.privateKey=t,!this.publicKey||!this.privateKey)throw new Error("No key")},e.prototype.setSignatureValue=function(e){return this.signatureValue=e},e.prototype.setSignatureType=function(e){var t,r,n,o;if(this.signatureType=e,e===XMLSecEnum.signatureTypesEnum.Enveloped&&this.references){for(o=[],t=r=0,n=this.references.length-1;0<=n?r<=n:r>=n;t=0<=n?++r:--r)o.push(this.references[t].setEnvelopedSignatureTransform());return o}},e.prototype.getSignatureParams=function(){var e;return e={signAlgURI:this.signAlgURI,signAlg:this.signAlg,references:this.references,privateKey:this.privateKey,publicKey:this.publicKey,prefix:this.prefix,canonicalisationAlg:this.canonicalisationAlg,canonicalisationAlgURI:this.canonicalisationAlgURI,signatureValue:this.signatureValue,signatureType:this.signatureType}},e}()}.call(this),function(){window.SignatureValidationResults=function(){function e(){this.result="",this.validatedSignature="",this.validatedReferences=[],this.validationErrors=[]}return e.prototype.setResult=function(e){return this.result=e},e.prototype.addValidatedReference=function(e,t,r){var n;return n={reference:"",node:"",error:""},n.reference=e,n.node=t,n.error=r,(r||""!==r)&&this.validationErrors.push(r),this.validatedReferences.push(n)},e.prototype.setReferences=function(e){var t,r,n;for(t=r=0,n=e.length-1;0<=n?r<=n:r>=n;t=0<=n?++r:--r)this.addValidatedReference(e[t][0],e[t][1],e[t][2]);return this.validatedReferences},e.prototype.setValidatedSignature=function(e){return this.validatedSignature=e},e.prototype.addValidationErrors=function(e){if(e||""!==e)return this.validationErrors.push(e)},e.prototype.getResults=function(){var e;return e={result:this.result,validatedReferences:this.validatedReferences,validatedSignature:this.validatedSignature,validationErrors:this.validationErrors}},e.prototype.getResult=function(){return this.result},e.prototype.getValidationErrors=function(){return this.validationErrors},e}()}.call(this),function(){window.SignedXML=function(){function e(){var e;e=0}var t,r,n,o,i,s,a,u,c,l,p,h;return n=function(e,t){return(new CanonicalXML).canonicalise(e).then(function(r){return CryptoWrapper.Sign(r,t).then(function(r){return ElementBuilder.buildSignatureElement(t.prefix,e,r)})})},e.prototype.sign=function(e,t){var r,i,s;return i=t.prefix,r=i?i:"",s=a(e,t).then(function(i){return n(i,t).then(function(n){var i;return i=n,o(r,t.publicKey).then(function(r){var o;return r&&i.appendChild(r),t.signatureType===XMLSecEnum.signatureTypesEnum.Enveloped&&e.documentElement.appendChild(n),t.signatureType===XMLSecEnum.signatureTypesEnum.Detached&&(o=ElementBuilder.buildWrappingElement(),o.documentElement.appendChild(e.children[0]),o.documentElement.appendChild(n),e=o),e})})})},o=function(e,t){var r;return r=t.algorithm.name,window.crypto.subtle.exportKey("jwk",t).then(function(t){var n,o;if(r===XMLSecEnum.WebCryptoAlgMapper.RSASHA1.name)return n=Helper.base64URLtoBase64(t.e,t),o=Helper.base64URLtoBase64(t.n,exportKey),ElementBuilder.buildRSAKeyInfoElement(e,o,n)})},s=function(e,r){var n,o,s,a;return a="",s=t(e,r),Promise.all(function(){var t,u,c;for(c=[],n=t=0,u=s.length-1;0<=u?t<=u:t>=u;n=0<=u?++t:--t)o=s[n],c.push(i(e,r,o).then(function(e){return a[n]=e}));return c}()).then(function(e){return e})},t=function(e,t){var r,n,o,i,s,a,u,c,l,p,h;for(a=[],h="",r=i=0,l=t.references.length-1;0<=l?i<=l:i>=l;r=0<=l?++i:--i)if(c=t.references[r],u=xpath.select(c.xpath,e),u.length>1)for(o=s=0,p=u.length-1;0<=p?s<=p:s>=p;o=0<=p?++s:--s)n="//*[@id='"+Helper.ensureHasId(u[o])+"']",h=new Reference(n,c.transforms,c.digestAlgURI),a.push(h);else if(1===u.length)n="//*[@id='"+Helper.ensureHasId(u[0])+"']",h=new Reference(n,c.transforms,c.digestAlgURI),a.push(c);else if(0===node.length)throw new Error("Node not found or invalid xPath:"+c.xpath);return a},i=function(e,t,r){var n,o,i,s,a,u,c,l;for(u=t.prefix,n=u?u:"",a=xpath.select(r.xpath,e)[0],i=Helper.ensureHasId(a),l=a,o=s=0,c=r.transforms.length-1;0<=c?s<=c:s>=c;o=0<=c?++s:--s)if(Helper.mapFromURI(r.transforms[o])!==XMLSecEnum.WebCryptoAlgMapper.envelopedSignature){if(Helper.mapFromURI(r.transforms[o])===XMLSecEnum.WebCryptoAlgMapper.c14n)return(new CanonicalXML).canonicalise(l).then(function(e){var n;return n=CryptoWrapper.hash(e,r.digestAlg).then(function(e){return ElementBuilder.buildReferenceElement(i,t.prefix,r.transforms,r.digestAlgURI,e)}).then(null,function(e){return console.log(e)})});throw new Error("Algorithm not supported")}},a=function(e,t){var r,n,o;return n=t.signatureAlg,o=[],r=s(e,t).then(function(e){return ElementBuilder.buildSignedInfoElement(t,e)})},c=function(e,t){var r,n,o,i,s,a,c,l,p,h;if("string"==typeof e&&(p=$.parseXML(p)),r=$(e).find(XMLSecEnum.NodeNames.signature),r.length>1)throw new error("More then one Signature Element detected!");if(t.setValidatedSignature(r),l=new SignatureParams,s=xpath.select(XMLSecEnum.xPathSelectors.CanonicalisationAlg,e),0===s.length)throw new Error("could not find CanonicalizationMethod/@Algorithm element");if(l.setCanonicalisationAlgFromURI(s[0].value),l.setSigAlgFromURI(utils.findFirst(e,XMLSecEnum.xPathSelectors.SignatureAlg).value),i=[],c=xpath.select(XMLSecEnum.xPathSelectors.References,e),0===c.length)throw new Error("could not find any Reference elements");for(n=o=0,a=c.length-1;0<=a?o<=a:o>=a;n=0<=a?++o:--o)i.push(u(c[n]));return l.setReferences(i),l.setSignatureValue(utils.findFirst(e,XMLSecEnum.xPathSelectors.SingatureValue).data.replace(/\n/g,"")),h=xpath.select(XMLSecEnum.xPathSelectors.Signature,e)[0],h.remove(),l.getSignatureParams()},u=function(e){var t,r,n,o,i,s,a,u,c,l,p,h,f;if(t=utils.findAttr(utils.findChilds(e,XMLSecEnum.NodeNames.digestMethod)[0],XMLSecEnum.AttributeNames.algorithm),!t)throw new Error("could not find Algorithm attribute in node "+digestAlgoNode.toString());if(n=t.value,s=utils.findChilds(e,XMLSecEnum.NodeNames.digestValue),0===s.length)throw new Error("could not find DigestValue node in reference "+e.toString());if(0===s[0].childNodes.length||!s[0].firstChild.data)throw new Error("could not find the value of DigestValue in "+s[0].toString());if(o=s[0].firstChild.data,c=[],p=[],s=utils.findChilds(e,XMLSecEnum.NodeNames.transforms),0!==s.length)for(f=s[0],h=utils.findChilds(f,XMLSecEnum.NodeNames.transform),l=i=0,a=h.length-1;0<=a?i<=a:i>=a;l=0<=a?++i:--i)p.push(utils.findAttr(h[l],XMLSecEnum.AttributeNames.algorithm).value);return r=Helper.mapFromURI(n),u=new Reference(xpath,p,r,utils.findAttr(e,"URI").value,o)},e.prototype.verify=function(e,t){var n,o,i,s,a;return a=$.parseXML(e),a||(a=e),n=new SignatureValidationResults,s=l(a),i=c(a,n),o=r(i.references,i.signatureTypesEnum),o===!1&&(a=a.children[0].firstChild),h(s,t,i).then(function(e){return n.setResult(e[0]),n.addValidationErrors(e[1]),p(a,i.references,0,[]).then(function(e){return n.setReferences(e),n.getValidationErrors().length>0?n.setResult(!1):n.getResult===!0&&n.setResult(!0),n.getResults()})})},r=function(e){var t,r,n,o,i,s,a;for(r=!1,t=o=0,s=e.length-1;0<=s?o<=s:o>=s;t=0<=s?++o:--o)for(n=i=0,a=e[t].transforms.length-1;0<=a?i<=a:i>=a;n=0<=a?++i:--i)e[t].transforms[n]===XMLSecEnum.AlgIdentifiers.envSig&&(r=!0);return r},l=function(e){var t,r;return r=$(e),r||(r=e),t=$(xpath.select(XMLSecEnum.xPathSelectors.SignedInfo,e)),t[0]},h=function(e,t,r){return(new CanonicalXML).canonicalise(e).then(function(e){return CryptoWrapper.Verify(e,t,r).then(function(e){var t;return t="",e||(t="Signature Value is invalid"),[e,t]})})},p=function(e,t,r,n){var o,i,s,a,u,c;if(c=$(e),a=n,t[r].uri&&"/*"!==t[r].uri){if(i=xpath.select("//*[@id='"+t[r].uri.substring(1)+"']",e),i.length>1)throw new error("Id is not unique");o=i[0]}else o=c[0];return u=o,s=new Promise(function(e,n){var o,i,s,a;for(i=!1,a=o=0,s=t[r].transforms.length-1;0<=s?o<=s:o>=s;a=0<=s?++o:--o)Helper.mapFromURI(t[r].transforms[a])===XMLSecEnum.WebCryptoAlgMapper.c14n&&(i=!0,(new CanonicalXML).canonicalise(u).then(function(t){return e(t)}));if(!i)return e(u)}),s.then(function(o){var i;return i=CryptoWrapper.hash(o,t[r].digestAlg).then(function(i){var s;return s="",i!==t[r].digestValue&&(s="Reference Validation Error of "+t[r].uri),a.push([t[r],o,s]),r<t.length-1?p(e,t,r+1,n):a})})},e.prototype.loadKey=function(e){var t,r,n,o,i,s,a,u,c,l,p,h;for(h=$.parseXML(e),h||(h=e),a=utils.findFirst(h,XMLSecEnum.xPathSelectors.Modulus).data,t=utils.findFirst(h,XMLSecEnum.xPathSelectors.Exponent).data,c=Helper.mapFromURI(utils.findFirst(h,XMLSecEnum.xPathSelectors.SignatureAlg).value),u=new Uint8Array(Helper.base64ToArrayBuffer(a)),o=i=0,l=u.length-1;(0<=l?i<=l:i>=l)&&0===u[0];o=0<=l?++i:--i)u=u.slice(1);for(a=Helper.arrayBufferToBase64(u),a=Helper.base64ToBase64URL(a),r=new Uint8Array(Helper.base64ToArrayBuffer(t)),o=s=0,p=r.length-1;(0<=p?s<=p:s>=p)&&0===r[0];o=0<=p?++s:--s)n=r.slice(1);return t=Helper.arrayBufferToBase64(r),t=Helper.base64ToBase64URL(t),window.crypto.subtle.importKey("jwk",{kty:c.kty,e:t,n:a,alg:c.alg,ext:!0},{name:c.name,hash:{name:c.hash}},!1,["verify"]).then(function(e){return e}).then(null,function(e){return console.log(e)})},e}()}.call(this),function(){window.XMLSecEnum=function(){function e(){}return e.namespaceURIs={xmlSig:"http://www.w3.org/2000/09/xmldsig#",xmlEnc:"http://www.w3.org/2001/04/xmlenc#"},e.WebCryptoAlgMapper={RSASHA1:{kty:"RSA",alg:"RS1",name:"RSASSA-PKCS1-v1_5",hash:"SHA-1"},HMACSHA1:{name:"HMAC",hash:"SHA-1"},SHA1:"SHA-1",AESCBC:"AES-CBC",AESGCM:"AES-GCM",c14n:"c14n"},e.URIMapper={aHR0cDovL3d3dy53My5vcmcvdHIvMjAwMS9yZWMteG1sLWMxNG4tMjAwMTAzMTU:"c14n",aHR0cDovL3d3dy53My5vcmcvMjAwMC8wOS94bWxkc2lnI3JzYS1zaGEx:"RSASHA1",aHR0cDovL3d3dy53My5vcmcvMjAwMS8wNC94bWxlbmMjYWVzMTI4LWNiYw:"AESCBC",aHR0cDovL3d3dy53My5vcmcvMjAwMS8wNC94bWxlbmMjYWVzMTkyLWNiYw:"AESCBC",aHR0cDovL3d3dy53My5vcmcvMjAwMS8wNC94bWxlbmMjYWVzMjU2LWNiYw:"AESCBC",aHR0cDovL3d3dy53My5vcmcvMjAwOS94bWxlbmMjYWVzMTI4LWdjbQ:"AESGCM",aHR0cDovL3d3dy53My5vcmcvMjAwOS94bWxlbmMjYWVzMTkyLWdjbQ:"AESGCM",aHR0cDovL3d3dy53My5vcmcvMjAwOS94bWxlbmMjYWVzMjU2LWdjbQ:"AESGCM",aHR0cDovL3d3dy53My5vcmcvMjAwMS8wNC94bWxlbmMjZWxlbWVudA:"Element",aHR0cDovL3d3dy53My5vcmcvMjAwMS8wNC94bWxlbmMjY29udGVudA:"Content",aHR0cDovL3d3dy53My5vcmcvMjAwMC8wOS94bWxkc2lnI3NoYTE:"SHA1",aHR0cDovL3d3dy53My5vcmcvMjAwMC8wOS94bWxkc2lnI2htYWMtc2hhMQ:"HMACSHA1"},e.signatureTypesEnum={Enveloped:"Enveloped",Detached:"Detached"},e.AlgIdentifiers={AESCBC128:"http://www.w3.org/2001/04/xmlenc#aes128-cbc",AESCBC192:"http://www.w3.org/2001/04/xmlenc#aes192-cbc",AESCBC256:"http://www.w3.org/2001/04/xmlenc#aes256-cbc",AESGCM128:"http://www.w3.org/2009/xmlenc#aes128-gcm",AESGCM192:"http://www.w3.org/2009/xmlenc#aes192-gcm",AESGCM256:"http://www.w3.org/2009/xmlenc#aes256-gcm",RSAOAEP:"http://www.w3.org/2001/04/xmlenc#rsa-oaep-mgf1p",RSASHA1:"http://www.w3.org/2000/09/xmldsig#rsa-sha1",c14n:"http://www.w3.org/TR/2001/REC-xml-c14n-20010315",envSig:"http://www.w3.org/2000/09/xmldsig#enveloped-signature",SHA1:"http://www.w3.org/2000/09/xmldsig#sha1",HMACSHA1:"http://www.w3.org/2000/09/xmldsig#hmac-sha1"},e.Type={Element:"Element",Content:"Content"},e.KeyTypes={Private:"private",Secret:"secret",Public:"public"},e.NodeNames={encData:"EncryptedData",encMethod:"EncryptionMethod",encKey:"EncryptedKey",cipherValue:"CipherValue",digestMethod:"DigestMethod",digestValue:"DigestValue",transforms:"Transforms",transform:"Transform",signature:"Signature",signedInfo:"SignedInfo"},e.AttributeNames={type:"Type",algorithm:"Algorithm"},e.xPathSelectors={CanonicalisationAlg:".//*[local-name(.)='CanonicalizationMethod']/@Algorithm",SignatureAlg:".//*[local-name(.)='SignatureMethod']/@Algorithm",References:".//*[local-name(.)='SignedInfo']/*[local-name(.)='Reference']",SingatureValue:".//*[local-name(.)='SignatureValue']/text()",Modulus:".//*[local-name(.)='Modulus']/text()",Exponent:".//*[local-name(.)='Exponent']/text()",EncryptedData:"//*[local-name()='EncryptedData']",Signature:"//*[local-name()='Signature']",SignedInfo:"//*[local-name()='SignedInfo']"},e.idAttributes=["Id","ID","id"],e}()}.call(this);